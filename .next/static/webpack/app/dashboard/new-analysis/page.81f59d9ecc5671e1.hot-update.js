"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/new-analysis/page",{

/***/ "(app-pages-browser)/./components/MapView.tsx":
/*!********************************!*\
  !*** ./components/MapView.tsx ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var maplibre_gl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! maplibre-gl */ \"(app-pages-browser)/./node_modules/maplibre-gl/dist/maplibre-gl.js\");\n/* harmony import */ var maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(maplibre_gl__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @turf/turf */ \"(app-pages-browser)/./node_modules/@turf/area/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @turf/turf */ \"(app-pages-browser)/./node_modules/@turf/bbox/dist/esm/index.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-alert.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/minus.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/navigation.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/mouse-pointer-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/box.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/pentagon.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/undo-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/map.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/layers.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,Box,Layers,Loader2,Map,Maximize2,Minus,MousePointer2,Navigation,Pentagon,Plus,Trash2,Undo2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/maximize-2.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nconst MapView = /*#__PURE__*/ _s((0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(_c = _s((param, ref)=>{\n    let { className = \"\", isWizard = false, onAreaSelected, onLocationChange, initialGeoJSON = null } = param;\n    _s();\n    const mapContainer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mapInstance = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [useSimulation, setUseSimulation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [activeTool, setActiveTool] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('hand');\n    const activeToolRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)('hand'); // Track current tool for event listeners\n    const [polygonVertices, setPolygonVertices] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const tempVerticesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]); // Track vertices in event listeners\n    const polygonHistoryRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]); // Track history for undo\n    const [currentGeoJSON, setCurrentGeoJSON] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Keep ref in sync with state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapView.useEffect\": ()=>{\n            activeToolRef.current = activeTool;\n            // Update cursor when tool changes\n            if (mapInstance.current && isLoaded) {\n                const canvas = mapInstance.current.getCanvas();\n                const map = mapInstance.current;\n                console.log('Tool changed to:', activeTool);\n                if (activeTool === 'hand') {\n                    canvas.style.cursor = '';\n                    // Enable drag pan\n                    if (map.dragPan) {\n                        map.dragPan.enable();\n                        console.log('DragPan enabled');\n                    }\n                } else if (activeTool === 'box' || activeTool === 'polygon') {\n                    canvas.style.cursor = 'crosshair';\n                    // Disable drag pan to prevent map scrolling\n                    if (map.dragPan) {\n                        map.dragPan.disable();\n                        console.log('DragPan disabled for', activeTool);\n                    }\n                }\n            }\n        }\n    }[\"MapView.useEffect\"], [\n        activeTool,\n        isLoaded\n    ]);\n    // Undo function for polygon drawing\n    const handleUndo = ()=>{\n        if (polygonHistoryRef.current.length > 1) {\n            // Remove current state\n            polygonHistoryRef.current.pop();\n            // Get previous state\n            const previousState = polygonHistoryRef.current[polygonHistoryRef.current.length - 1];\n            tempVerticesRef.current = [\n                ...previousState\n            ];\n            setPolygonVertices([\n                ...previousState\n            ]);\n            // Update map display\n            if (mapInstance.current) {\n                const source = mapInstance.current.getSource('aoi-results');\n                if (previousState.length >= 3) {\n                    const closedCoords = [\n                        ...previousState,\n                        previousState[0]\n                    ];\n                    source.setData({\n                        type: 'Feature',\n                        geometry: {\n                            type: 'Polygon',\n                            coordinates: [\n                                closedCoords\n                            ]\n                        },\n                        properties: {}\n                    });\n                } else if (previousState.length === 2) {\n                    source.setData({\n                        type: 'Feature',\n                        geometry: {\n                            type: 'LineString',\n                            coordinates: previousState\n                        },\n                        properties: {}\n                    });\n                } else {\n                    source.setData({\n                        type: 'FeatureCollection',\n                        features: []\n                    });\n                }\n            }\n        }\n    };\n    // Keyboard listener for Ctrl+Z / Cmd+Z\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapView.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"MapView.useEffect.handleKeyDown\": (e)=>{\n                    if ((e.ctrlKey || e.metaKey) && e.key === 'z' && activeToolRef.current === 'polygon' && polygonVertices.length > 0) {\n                        e.preventDefault();\n                        handleUndo();\n                    }\n                }\n            }[\"MapView.useEffect.handleKeyDown\"];\n            window.addEventListener('keydown', handleKeyDown);\n            return ({\n                \"MapView.useEffect\": ()=>window.removeEventListener('keydown', handleKeyDown)\n            })[\"MapView.useEffect\"];\n        }\n    }[\"MapView.useEffect\"], [\n        polygonVertices\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapView.useEffect\": ()=>{\n            if (!mapContainer.current) return;\n            const initMap = {\n                \"MapView.useEffect.initMap\": ()=>{\n                    try {\n                        // Basic check for WebGL support\n                        const canvas = document.createElement('canvas');\n                        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n                        if (!gl) {\n                            throw new Error(\"WebGL not supported\");\n                        }\n                        // MapLibre sometimes tries to access location.href which fails in some sandboxed environments.\n                        // We wrap the instantiation in a try-catch.\n                        mapInstance.current = new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().Map)({\n                            container: mapContainer.current,\n                            style: {\n                                version: 8,\n                                sources: {\n                                    'streets': {\n                                        type: 'raster',\n                                        tiles: [\n                                            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}'\n                                        ],\n                                        tileSize: 256,\n                                        attribution: 'Esri'\n                                    }\n                                },\n                                layers: [\n                                    {\n                                        id: 'streets-layer',\n                                        type: 'raster',\n                                        source: 'streets',\n                                        minzoom: 0,\n                                        maxzoom: 19\n                                    }\n                                ]\n                            },\n                            center: [\n                                -74.006,\n                                40.7128\n                            ],\n                            zoom: 12,\n                            pitch: 0,\n                            bearing: 0,\n                            doubleClickZoom: false // Disable to allow polygon double-click completion\n                        });\n                        // Update cursor based on active tool\n                        const updateCursor = {\n                            \"MapView.useEffect.initMap.updateCursor\": ()=>{\n                                if (!mapInstance.current) return;\n                                const canvas = mapInstance.current.getCanvas();\n                                if (activeToolRef.current === 'hand') {\n                                    canvas.style.cursor = '';\n                                } else if (activeToolRef.current === 'box' || activeToolRef.current === 'polygon') {\n                                    canvas.style.cursor = 'crosshair';\n                                }\n                            }\n                        }[\"MapView.useEffect.initMap.updateCursor\"];\n                        mapInstance.current.on('load', {\n                            \"MapView.useEffect.initMap\": ()=>{\n                                setIsLoaded(true);\n                                if (!mapInstance.current) return;\n                                // Initialize GeoJSON source for AOI (both wizard and results view)\n                                mapInstance.current.addSource('aoi-results', {\n                                    type: 'geojson',\n                                    data: {\n                                        type: 'FeatureCollection',\n                                        features: []\n                                    }\n                                });\n                                mapInstance.current.addLayer({\n                                    id: 'aoi-fill',\n                                    type: 'fill',\n                                    source: 'aoi-results',\n                                    paint: {\n                                        'fill-color': '#6366f1',\n                                        'fill-opacity': 0.2\n                                    }\n                                });\n                                mapInstance.current.addLayer({\n                                    id: 'aoi-outline',\n                                    type: 'line',\n                                    source: 'aoi-results',\n                                    paint: {\n                                        'line-color': '#4f46e5',\n                                        'line-width': 2\n                                    }\n                                });\n                                // Load initial GeoJSON for non-wizard maps (e.g., processing screen, dashboard)\n                                if (!isWizard && initialGeoJSON) {\n                                    setTimeout({\n                                        \"MapView.useEffect.initMap\": ()=>{\n                                            if (!mapInstance.current) return;\n                                            const source = mapInstance.current.getSource('aoi-results');\n                                            if (source) {\n                                                source.setData(initialGeoJSON);\n                                                // Fit map to AOI bounds\n                                                const bounds = new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().LngLatBounds)();\n                                                if (initialGeoJSON.geometry.type === 'Polygon') {\n                                                    initialGeoJSON.geometry.coordinates[0].forEach({\n                                                        \"MapView.useEffect.initMap\": (coord)=>{\n                                                            bounds.extend(coord);\n                                                        }\n                                                    }[\"MapView.useEffect.initMap\"]);\n                                                    mapInstance.current.fitBounds(bounds, {\n                                                        padding: 20,\n                                                        duration: 0\n                                                    });\n                                                }\n                                            }\n                                        }\n                                    }[\"MapView.useEffect.initMap\"], 100);\n                                }\n                                // Add interactive drawing (box and polygon modes)\n                                let startPoint = null;\n                                let isDragging = false;\n                                mapInstance.current.on('mousedown', {\n                                    \"MapView.useEffect.initMap\": (e)=>{\n                                        console.log('Mouse down event fired, current tool:', activeToolRef.current);\n                                        if (activeToolRef.current === 'box') {\n                                            console.log('Starting box draw at:', e.lngLat);\n                                            isDragging = true;\n                                            startPoint = [\n                                                e.lngLat.lng,\n                                                e.lngLat.lat\n                                            ];\n                                            mapInstance.current.getCanvas().style.cursor = 'crosshair';\n                                        }\n                                    }\n                                }[\"MapView.useEffect.initMap\"]);\n                                mapInstance.current.on('mousemove', {\n                                    \"MapView.useEffect.initMap\": (e)=>{\n                                        if (isDragging && startPoint && activeToolRef.current === 'box') {\n                                            const endPoint = [\n                                                e.lngLat.lng,\n                                                e.lngLat.lat\n                                            ];\n                                            const box = [\n                                                [\n                                                    startPoint[0],\n                                                    startPoint[1]\n                                                ],\n                                                [\n                                                    endPoint[0],\n                                                    startPoint[1]\n                                                ],\n                                                [\n                                                    endPoint[0],\n                                                    endPoint[1]\n                                                ],\n                                                [\n                                                    startPoint[0],\n                                                    endPoint[1]\n                                                ],\n                                                [\n                                                    startPoint[0],\n                                                    startPoint[1]\n                                                ]\n                                            ];\n                                            const source = mapInstance.current.getSource('aoi-results');\n                                            source.setData({\n                                                type: 'Feature',\n                                                geometry: {\n                                                    type: 'Polygon',\n                                                    coordinates: [\n                                                        box\n                                                    ]\n                                                },\n                                                properties: {}\n                                            });\n                                        }\n                                    }\n                                }[\"MapView.useEffect.initMap\"]);\n                                mapInstance.current.on('mouseup', {\n                                    \"MapView.useEffect.initMap\": (e)=>{\n                                        if (isDragging && startPoint && activeToolRef.current === 'box') {\n                                            isDragging = false;\n                                            const endPoint = [\n                                                e.lngLat.lng,\n                                                e.lngLat.lat\n                                            ];\n                                            const box = [\n                                                [\n                                                    startPoint[0],\n                                                    startPoint[1]\n                                                ],\n                                                [\n                                                    endPoint[0],\n                                                    startPoint[1]\n                                                ],\n                                                [\n                                                    endPoint[0],\n                                                    endPoint[1]\n                                                ],\n                                                [\n                                                    startPoint[0],\n                                                    endPoint[1]\n                                                ],\n                                                [\n                                                    startPoint[0],\n                                                    startPoint[1]\n                                                ]\n                                            ];\n                                            const feature = {\n                                                type: 'Feature',\n                                                geometry: {\n                                                    type: 'Polygon',\n                                                    coordinates: [\n                                                        box\n                                                    ]\n                                                },\n                                                properties: {}\n                                            };\n                                            const source = mapInstance.current.getSource('aoi-results');\n                                            source.setData(feature);\n                                            // Calculate area using turf\n                                            if (isWizard && onAreaSelected) {\n                                                const area = _turf_turf__WEBPACK_IMPORTED_MODULE_3__.area(feature) / 1000000; // Convert to km²\n                                                setCurrentGeoJSON(feature);\n                                                onAreaSelected(Math.round(area * 100) / 100, feature);\n                                            }\n                                            mapInstance.current.getCanvas().style.cursor = '';\n                                            startPoint = null;\n                                        }\n                                    }\n                                }[\"MapView.useEffect.initMap\"]);\n                                // Polygon drawing with click-to-add-vertex\n                                mapInstance.current.on('click', {\n                                    \"MapView.useEffect.initMap\": (e)=>{\n                                        console.log('Click event fired, current tool:', activeToolRef.current);\n                                        if (activeToolRef.current === 'polygon') {\n                                            console.log('Adding polygon vertex at:', e.lngLat);\n                                            const point = [\n                                                e.lngLat.lng,\n                                                e.lngLat.lat\n                                            ];\n                                            tempVerticesRef.current.push(point);\n                                            setPolygonVertices([\n                                                ...tempVerticesRef.current\n                                            ]);\n                                            // Save to history for undo\n                                            polygonHistoryRef.current.push([\n                                                ...tempVerticesRef.current\n                                            ]);\n                                            // Draw the polygon in progress\n                                            if (tempVerticesRef.current.length >= 3) {\n                                                const closedCoords = [\n                                                    ...tempVerticesRef.current,\n                                                    tempVerticesRef.current[0]\n                                                ];\n                                                const source = mapInstance.current.getSource('aoi-results');\n                                                source.setData({\n                                                    type: 'Feature',\n                                                    geometry: {\n                                                        type: 'Polygon',\n                                                        coordinates: [\n                                                            closedCoords\n                                                        ]\n                                                    },\n                                                    properties: {}\n                                                });\n                                            } else if (tempVerticesRef.current.length === 2) {\n                                                const source = mapInstance.current.getSource('aoi-results');\n                                                source.setData({\n                                                    type: 'Feature',\n                                                    geometry: {\n                                                        type: 'LineString',\n                                                        coordinates: tempVerticesRef.current\n                                                    },\n                                                    properties: {}\n                                                });\n                                            }\n                                        }\n                                    }\n                                }[\"MapView.useEffect.initMap\"]);\n                                // Double-click to finish polygon\n                                mapInstance.current.on('dblclick', {\n                                    \"MapView.useEffect.initMap\": (e)=>{\n                                        if (activeToolRef.current === 'polygon' && tempVertices.length >= 3) {\n                                            e.preventDefault();\n                                            const closedCoords = [\n                                                ...tempVertices,\n                                                tempVertices[0]\n                                            ];\n                                            const feature = {\n                                                type: 'Feature',\n                                                geometry: {\n                                                    type: 'Polygon',\n                                                    coordinates: [\n                                                        closedCoords\n                                                    ]\n                                                },\n                                                properties: {}\n                                            };\n                                            const source = mapInstance.current.getSource('aoi-results');\n                                            source.setData(feature);\n                                            // Calculate area using turf\n                                            if (isWizard && onAreaSelected) {\n                                                const area = _turf_turf__WEBPACK_IMPORTED_MODULE_3__.area(feature) / 1000000; // Convert to km²\n                                                setCurrentGeoJSON(feature);\n                                                onAreaSelected(Math.round(area * 100) / 100, feature);\n                                            }\n                                            // Reset\n                                            tempVerticesRef.current = [];\n                                            polygonHistoryRef.current = []; // Clear undo history\n                                            setPolygonVertices([]);\n                                            mapInstance.current.getCanvas().style.cursor = '';\n                                        }\n                                    }\n                                }[\"MapView.useEffect.initMap\"]);\n                            }\n                        }[\"MapView.useEffect.initMap\"]);\n                        mapInstance.current.on('error', {\n                            \"MapView.useEffect.initMap\": (e)=>{\n                                var _e_error_message, _e_error, _e_error_message1, _e_error1;\n                                console.error(\"MapLibre internal error:\", e);\n                                // If a fatal rendering error happens after init, we still switch\n                                if (((_e_error = e.error) === null || _e_error === void 0 ? void 0 : (_e_error_message = _e_error.message) === null || _e_error_message === void 0 ? void 0 : _e_error_message.includes('webgl')) || ((_e_error1 = e.error) === null || _e_error1 === void 0 ? void 0 : (_e_error_message1 = _e_error1.message) === null || _e_error_message1 === void 0 ? void 0 : _e_error_message1.includes('Location'))) {\n                                    setUseSimulation(true);\n                                }\n                            }\n                        }[\"MapView.useEffect.initMap\"]);\n                    } catch (err) {\n                        console.warn(\"Map initialization failed, switching to Simulation Mode:\", err.message);\n                        setUseSimulation(true);\n                    }\n                }\n            }[\"MapView.useEffect.initMap\"];\n            initMap();\n            return ({\n                \"MapView.useEffect\": ()=>{\n                    if (mapInstance.current) {\n                        mapInstance.current.remove();\n                        mapInstance.current = null;\n                    }\n                }\n            })[\"MapView.useEffect\"];\n        }\n    }[\"MapView.useEffect\"], [\n        isWizard\n    ]);\n    // Load initialGeoJSON when it changes (for processing screen, etc.)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapView.useEffect\": ()=>{\n            if (!isWizard && initialGeoJSON && mapInstance.current && isLoaded) {\n                const source = mapInstance.current.getSource('aoi-results');\n                if (source) {\n                    source.setData(initialGeoJSON);\n                    // Fit map to AOI bounds\n                    const bounds = new (maplibre_gl__WEBPACK_IMPORTED_MODULE_2___default().LngLatBounds)();\n                    if (initialGeoJSON.geometry.type === 'Polygon') {\n                        initialGeoJSON.geometry.coordinates[0].forEach({\n                            \"MapView.useEffect\": (coord)=>{\n                                bounds.extend(coord);\n                            }\n                        }[\"MapView.useEffect\"]);\n                        mapInstance.current.fitBounds(bounds, {\n                            padding: 50,\n                            duration: 1000\n                        });\n                    }\n                }\n            }\n        }\n    }[\"MapView.useEffect\"], [\n        initialGeoJSON,\n        isWizard,\n        isLoaded\n    ]);\n    const zoomIn = ()=>{\n        var _mapInstance_current;\n        return (_mapInstance_current = mapInstance.current) === null || _mapInstance_current === void 0 ? void 0 : _mapInstance_current.zoomIn();\n    };\n    const zoomOut = ()=>{\n        var _mapInstance_current;\n        return (_mapInstance_current = mapInstance.current) === null || _mapInstance_current === void 0 ? void 0 : _mapInstance_current.zoomOut();\n    };\n    const resetNorth = ()=>{\n        var _mapInstance_current;\n        return (_mapInstance_current = mapInstance.current) === null || _mapInstance_current === void 0 ? void 0 : _mapInstance_current.resetNorthPitch();\n    };\n    // Expose methods to parent via ref\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref, {\n        \"MapView.useImperativeHandle\": ()=>({\n                flyTo: ({\n                    \"MapView.useImperativeHandle\": (lat, lon, bounds)=>{\n                        if (!mapInstance.current) return;\n                        if (bounds) {\n                            mapInstance.current.fitBounds([\n                                bounds[0],\n                                bounds[1],\n                                bounds[2],\n                                bounds[3]\n                            ], {\n                                padding: 50,\n                                duration: 1000\n                            });\n                        } else {\n                            mapInstance.current.flyTo({\n                                center: [\n                                    lon,\n                                    lat\n                                ],\n                                zoom: 12,\n                                duration: 1000\n                            });\n                        }\n                        if (onLocationChange) {\n                            onLocationChange(lat, lon);\n                        }\n                    }\n                })[\"MapView.useImperativeHandle\"],\n                loadGeoJSON: ({\n                    \"MapView.useImperativeHandle\": (geojson)=>{\n                        if (!mapInstance.current) return;\n                        const source = mapInstance.current.getSource('aoi-results');\n                        if (!source) return;\n                        // Handle both Feature and FeatureCollection\n                        let feature;\n                        if (geojson.type === 'FeatureCollection') {\n                            // Use the first polygon/multipolygon feature\n                            const polyFeature = geojson.features.find({\n                                \"MapView.useImperativeHandle.polyFeature\": (f)=>f.geometry && [\n                                        'Polygon',\n                                        'MultiPolygon'\n                                    ].includes(f.geometry.type)\n                            }[\"MapView.useImperativeHandle.polyFeature\"]);\n                            if (!polyFeature) return;\n                            feature = polyFeature;\n                        } else {\n                            feature = geojson;\n                        }\n                        source.setData(feature);\n                        setCurrentGeoJSON(feature);\n                        // Calculate area\n                        const area = _turf_turf__WEBPACK_IMPORTED_MODULE_3__.area(feature) / 1000000; // km²\n                        if (onAreaSelected) {\n                            onAreaSelected(Math.round(area * 100) / 100, feature);\n                        }\n                        // Fit map to geometry bounds\n                        const bbox = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.bbox(feature);\n                        mapInstance.current.fitBounds([\n                            bbox[0],\n                            bbox[1],\n                            bbox[2],\n                            bbox[3]\n                        ], {\n                            padding: 50,\n                            duration: 1000\n                        });\n                    }\n                })[\"MapView.useImperativeHandle\"],\n                clearAOI: ({\n                    \"MapView.useImperativeHandle\": ()=>{\n                        if (!mapInstance.current) return;\n                        const source = mapInstance.current.getSource('aoi-results');\n                        if (source) {\n                            source.setData({\n                                type: 'FeatureCollection',\n                                features: []\n                            });\n                        }\n                        setCurrentGeoJSON(null);\n                        setPolygonVertices([]);\n                        if (onAreaSelected) {\n                            onAreaSelected(0);\n                        }\n                    }\n                })[\"MapView.useImperativeHandle\"]\n            })\n    }[\"MapView.useImperativeHandle\"]);\n    // If MapLibre initialization failed, show error state\n    if (useSimulation) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"relative bg-slate-50 overflow-hidden \".concat(className, \" flex items-center justify-center\"),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"max-w-md mx-auto text-center p-8 space-y-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                            className: \"w-8 h-8 text-rose-600\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                            lineNumber: 502,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 501,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-lg font-bold text-slate-900\",\n                                children: \"Map Unavailable\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 505,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm text-slate-600 leading-relaxed\",\n                                children: \"Unable to initialize the interactive map. This may be due to WebGL not being supported or enabled in your browser.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 506,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 504,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-slate-100 rounded-lg p-4 text-left space-y-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-xs font-bold text-slate-700\",\n                                children: \"Troubleshooting:\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 511,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                className: \"text-xs text-slate-600 space-y-1 list-disc list-inside\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: \"Ensure WebGL is enabled in your browser settings\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 513,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: \"Update your graphics drivers\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 514,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: \"Try a different browser (Chrome, Firefox, or Edge)\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 515,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: \"Disable hardware acceleration and re-enable it\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 516,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 512,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 510,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>window.location.reload(),\n                        className: \"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors\",\n                        children: \"Reload Page\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 519,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                lineNumber: 500,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n            lineNumber: 499,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative bg-slate-50 overflow-hidden group \".concat(className, \" flex items-center justify-center\"),\n        children: [\n            !isLoaded && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col items-center gap-3 text-slate-400 z-20\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        className: \"w-8 h-8 animate-spin\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 534,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-xs font-medium uppercase tracking-widest\",\n                        children: \"Loading Map Engine...\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 535,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                lineNumber: 533,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: mapContainer,\n                className: \"absolute inset-0 w-full h-full transition-opacity duration-700 \".concat(isLoaded ? 'opacity-100' : 'opacity-0')\n            }, void 0, false, {\n                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                lineNumber: 539,\n                columnNumber: 7\n            }, undefined),\n            isLoaded && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute right-4 top-4 space-y-2 z-10\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-white/95 backdrop-blur rounded-lg border border-slate-200 shadow-lg overflow-hidden flex flex-col\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: zoomIn,\n                                        className: \"p-2 hover:bg-slate-100 border-b border-slate-100\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                            className: \"w-4 h-4 text-slate-600\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 545,\n                                            columnNumber: 101\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 545,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: zoomOut,\n                                        className: \"p-2 hover:bg-slate-100\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                            className: \"w-4 h-4 text-slate-600\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 546,\n                                            columnNumber: 76\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 546,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 544,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: resetNorth,\n                                className: \"p-2 bg-white/95 backdrop-blur rounded-lg border border-slate-200 shadow-lg hover:bg-slate-100 transition-colors\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                    className: \"w-4 h-4 text-slate-600\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                    lineNumber: 549,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 548,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 543,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute left-4 top-4 z-10\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-white/95 backdrop-blur rounded-lg border border-slate-200 shadow-lg flex flex-col p-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setActiveTool('hand'),\n                                    className: \"p-2 rounded-md transition-colors \".concat(activeTool === 'hand' ? 'bg-indigo-50 text-indigo-600' : 'hover:bg-slate-100 text-slate-600'),\n                                    title: \"Pan & Zoom\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 560,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                    lineNumber: 555,\n                                    columnNumber: 15\n                                }, undefined),\n                                isWizard && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveTool('box'),\n                                            className: \"p-2 rounded-md transition-colors \".concat(activeTool === 'box' ? 'bg-indigo-50 text-indigo-600' : 'hover:bg-slate-100 text-slate-600'),\n                                            title: \"Draw Rectangle\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                                lineNumber: 569,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 564,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveTool('polygon'),\n                                            className: \"p-2 rounded-md transition-colors \".concat(activeTool === 'polygon' ? 'bg-indigo-50 text-indigo-600' : 'hover:bg-slate-100 text-slate-600'),\n                                            title: \"Draw Polygon\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                                lineNumber: 576,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 571,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        polygonVertices.length > 0 && activeTool === 'polygon' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleUndo,\n                                            className: \"p-2 rounded-md hover:bg-amber-50 text-amber-600 transition-colors\",\n                                            title: \"Undo Last Point (Ctrl+Z)\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                                lineNumber: 584,\n                                                columnNumber: 23\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 579,\n                                            columnNumber: 21\n                                        }, undefined),\n                                        (currentGeoJSON || polygonVertices.length > 0) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>{\n                                                var _mapInstance_current;\n                                                const source = (_mapInstance_current = mapInstance.current) === null || _mapInstance_current === void 0 ? void 0 : _mapInstance_current.getSource('aoi-results');\n                                                if (source) {\n                                                    source.setData({\n                                                        type: 'FeatureCollection',\n                                                        features: []\n                                                    });\n                                                }\n                                                setCurrentGeoJSON(null);\n                                                setPolygonVertices([]);\n                                                tempVerticesRef.current = []; // Clear temp vertices\n                                                polygonHistoryRef.current = []; // Clear undo history\n                                                setActiveTool('hand');\n                                                if (onAreaSelected) onAreaSelected(0);\n                                            },\n                                            className: \"p-2 rounded-md hover:bg-rose-50 text-rose-600 transition-colors border-t border-slate-200\",\n                                            title: \"Clear AOI\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                                lineNumber: 604,\n                                                columnNumber: 23\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 588,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    ]\n                                }, void 0, true)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                            lineNumber: 554,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 553,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute bottom-4 left-4 right-4 flex justify-between items-end pointer-events-none z-10\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-slate-900/85 backdrop-blur text-white px-3 py-1.5 rounded-lg text-[10px] font-medium pointer-events-auto flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                        className: \"w-3 h-3 text-indigo-400\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 614,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    \"MapLibre GL Engine | ESRI World Street Map\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 613,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-2 pointer-events-auto\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"bg-white/95 backdrop-blur px-3 py-2 rounded-lg border border-slate-200 shadow-lg flex items-center gap-2 text-xs font-medium text-slate-700 hover:bg-slate-100\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                                lineNumber: 619,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            \" Layers\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 618,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"bg-white/95 backdrop-blur p-2 rounded-lg border border-slate-200 shadow-lg flex items-center justify-center hover:bg-slate-100\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_Box_Layers_Loader2_Map_Maximize2_Minus_MousePointer2_Navigation_Pentagon_Plus_Trash2_Undo2_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                            className: \"w-4 h-4 text-slate-600\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                            lineNumber: 622,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                        lineNumber: 621,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                                lineNumber: 617,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n                        lineNumber: 612,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Work\\\\MagicMakers\\\\verdify demo\\\\components\\\\MapView.tsx\",\n        lineNumber: 531,\n        columnNumber: 5\n    }, undefined);\n}, \"VEuPEmVsevjKAEig3PlEbGOOXxg=\")), \"VEuPEmVsevjKAEig3PlEbGOOXxg=\");\n_c1 = MapView;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapView);\nvar _c, _c1;\n$RefreshReg$(_c, \"MapView$forwardRef\");\n$RefreshReg$(_c1, \"MapView\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvTWFwVmlldy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFNEY7QUFDdkQ7QUFDRjtBQWtCYjtBQWdCdEIsTUFBTXNCLHdCQUFVakIsR0FBQUEsaURBQVVBLFNBQTJCLFFBQWdHa0I7UUFBL0YsRUFBRUMsWUFBWSxFQUFFLEVBQUVDLFdBQVcsS0FBSyxFQUFFQyxjQUFjLEVBQUVDLGdCQUFnQixFQUFFQyxpQkFBaUIsSUFBSSxFQUFFOztJQUNqSixNQUFNQyxlQUFlM0IsNkNBQU1BLENBQWlCO0lBQzVDLE1BQU00QixjQUFjNUIsNkNBQU1BLENBQXdCO0lBQ2xELE1BQU0sQ0FBQzZCLFVBQVVDLFlBQVksR0FBRzdCLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU0sQ0FBQzhCLGVBQWVDLGlCQUFpQixHQUFHL0IsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDZ0MsWUFBWUMsY0FBYyxHQUFHakMsK0NBQVFBLENBQTZCO0lBQ3pFLE1BQU1rQyxnQkFBZ0JuQyw2Q0FBTUEsQ0FBNkIsU0FBUyx5Q0FBeUM7SUFDM0csTUFBTSxDQUFDb0MsaUJBQWlCQyxtQkFBbUIsR0FBR3BDLCtDQUFRQSxDQUFxQixFQUFFO0lBQzdFLE1BQU1xQyxrQkFBa0J0Qyw2Q0FBTUEsQ0FBcUIsRUFBRSxHQUFHLG9DQUFvQztJQUM1RixNQUFNdUMsb0JBQW9CdkMsNkNBQU1BLENBQTRCLEVBQUUsR0FBRyx5QkFBeUI7SUFDMUYsTUFBTSxDQUFDd0MsZ0JBQWdCQyxrQkFBa0IsR0FBR3hDLCtDQUFRQSxDQUF5QjtJQUU3RSw4QkFBOEI7SUFDOUJGLGdEQUFTQTs2QkFBQztZQUNSb0MsY0FBY08sT0FBTyxHQUFHVDtZQUV4QixrQ0FBa0M7WUFDbEMsSUFBSUwsWUFBWWMsT0FBTyxJQUFJYixVQUFVO2dCQUNuQyxNQUFNYyxTQUFTZixZQUFZYyxPQUFPLENBQUNFLFNBQVM7Z0JBQzVDLE1BQU1DLE1BQU1q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QUFDZ0IsV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFyQzs7QUFFQSxpRUFBZUYsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFdvcmtcXE1hZ2ljTWFrZXJzXFx2ZXJkaWZ5IGRlbW9cXGNvbXBvbmVudHNcXE1hcFZpZXcudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlSW1wZXJhdGl2ZUhhbmRsZSwgZm9yd2FyZFJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtYXBsaWJyZWdsIGZyb20gJ21hcGxpYnJlLWdsJztcbmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7XG5pbXBvcnQge1xuICBNYXhpbWl6ZTIsXG4gIExheWVycyxcbiAgTW91c2VQb2ludGVyMixcbiAgSGV4YWdvbixcbiAgUGx1cyxcbiAgTWludXMsXG4gIE5hdmlnYXRpb24sXG4gIEJveCxcbiAgTG9hZGVyMixcbiAgQWxlcnRDaXJjbGUsXG4gIEV5ZSxcbiAgSW5mbyxcbiAgTWFwIGFzIE1hcEljb24sXG4gIFBlbnRhZ29uLFxuICBUcmFzaDIsXG4gIFVuZG8yXG59IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5cbmludGVyZmFjZSBNYXBWaWV3UHJvcHMge1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIGlzV2l6YXJkPzogYm9vbGVhbjtcbiAgb25BcmVhU2VsZWN0ZWQ/OiAoYXJlYTogbnVtYmVyLCBnZW9qc29uPzogR2VvSlNPTi5GZWF0dXJlKSA9PiB2b2lkO1xuICBvbkxvY2F0aW9uQ2hhbmdlPzogKGxhdDogbnVtYmVyLCBsb246IG51bWJlcikgPT4gdm9pZDtcbiAgaW5pdGlhbEdlb0pTT04/OiBHZW9KU09OLkZlYXR1cmUgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hcFZpZXdSZWYge1xuICBmbHlUbzogKGxhdDogbnVtYmVyLCBsb246IG51bWJlciwgYm91bmRzPzogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pID0+IHZvaWQ7XG4gIGxvYWRHZW9KU09OOiAoZ2VvanNvbjogR2VvSlNPTi5GZWF0dXJlIHwgR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbikgPT4gdm9pZDtcbiAgY2xlYXJBT0k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IE1hcFZpZXcgPSBmb3J3YXJkUmVmPE1hcFZpZXdSZWYsIE1hcFZpZXdQcm9wcz4oKHsgY2xhc3NOYW1lID0gXCJcIiwgaXNXaXphcmQgPSBmYWxzZSwgb25BcmVhU2VsZWN0ZWQsIG9uTG9jYXRpb25DaGFuZ2UsIGluaXRpYWxHZW9KU09OID0gbnVsbCB9LCByZWYpID0+IHtcbiAgY29uc3QgbWFwQ29udGFpbmVyID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbWFwSW5zdGFuY2UgPSB1c2VSZWY8bWFwbGlicmVnbC5NYXAgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzTG9hZGVkLCBzZXRJc0xvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1c2VTaW11bGF0aW9uLCBzZXRVc2VTaW11bGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FjdGl2ZVRvb2wsIHNldEFjdGl2ZVRvb2xdID0gdXNlU3RhdGU8J2hhbmQnIHwgJ2JveCcgfCAncG9seWdvbic+KCdoYW5kJyk7XG4gIGNvbnN0IGFjdGl2ZVRvb2xSZWYgPSB1c2VSZWY8J2hhbmQnIHwgJ2JveCcgfCAncG9seWdvbic+KCdoYW5kJyk7IC8vIFRyYWNrIGN1cnJlbnQgdG9vbCBmb3IgZXZlbnQgbGlzdGVuZXJzXG4gIGNvbnN0IFtwb2x5Z29uVmVydGljZXMsIHNldFBvbHlnb25WZXJ0aWNlc10gPSB1c2VTdGF0ZTxbbnVtYmVyLCBudW1iZXJdW10+KFtdKTtcbiAgY29uc3QgdGVtcFZlcnRpY2VzUmVmID0gdXNlUmVmPFtudW1iZXIsIG51bWJlcl1bXT4oW10pOyAvLyBUcmFjayB2ZXJ0aWNlcyBpbiBldmVudCBsaXN0ZW5lcnNcbiAgY29uc3QgcG9seWdvbkhpc3RvcnlSZWYgPSB1c2VSZWY8QXJyYXk8W251bWJlciwgbnVtYmVyXVtdPj4oW10pOyAvLyBUcmFjayBoaXN0b3J5IGZvciB1bmRvXG4gIGNvbnN0IFtjdXJyZW50R2VvSlNPTiwgc2V0Q3VycmVudEdlb0pTT05dID0gdXNlU3RhdGU8R2VvSlNPTi5GZWF0dXJlIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gS2VlcCByZWYgaW4gc3luYyB3aXRoIHN0YXRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYWN0aXZlVG9vbFJlZi5jdXJyZW50ID0gYWN0aXZlVG9vbDtcblxuICAgIC8vIFVwZGF0ZSBjdXJzb3Igd2hlbiB0b29sIGNoYW5nZXNcbiAgICBpZiAobWFwSW5zdGFuY2UuY3VycmVudCAmJiBpc0xvYWRlZCkge1xuICAgICAgY29uc3QgY2FudmFzID0gbWFwSW5zdGFuY2UuY3VycmVudC5nZXRDYW52YXMoKTtcbiAgICAgIGNvbnN0IG1hcCA9IG1hcEluc3RhbmNlLmN1cnJlbnQ7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdUb29sIGNoYW5nZWQgdG86JywgYWN0aXZlVG9vbCk7XG5cbiAgICAgIGlmIChhY3RpdmVUb29sID09PSAnaGFuZCcpIHtcbiAgICAgICAgY2FudmFzLnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAvLyBFbmFibGUgZHJhZyBwYW5cbiAgICAgICAgaWYgKG1hcC5kcmFnUGFuKSB7XG4gICAgICAgICAgbWFwLmRyYWdQYW4uZW5hYmxlKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0RyYWdQYW4gZW5hYmxlZCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFjdGl2ZVRvb2wgPT09ICdib3gnIHx8IGFjdGl2ZVRvb2wgPT09ICdwb2x5Z29uJykge1xuICAgICAgICBjYW52YXMuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7XG4gICAgICAgIC8vIERpc2FibGUgZHJhZyBwYW4gdG8gcHJldmVudCBtYXAgc2Nyb2xsaW5nXG4gICAgICAgIGlmIChtYXAuZHJhZ1Bhbikge1xuICAgICAgICAgIG1hcC5kcmFnUGFuLmRpc2FibGUoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRHJhZ1BhbiBkaXNhYmxlZCBmb3InLCBhY3RpdmVUb29sKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2FjdGl2ZVRvb2wsIGlzTG9hZGVkXSk7XG5cbiAgLy8gVW5kbyBmdW5jdGlvbiBmb3IgcG9seWdvbiBkcmF3aW5nXG4gIGNvbnN0IGhhbmRsZVVuZG8gPSAoKSA9PiB7XG4gICAgaWYgKHBvbHlnb25IaXN0b3J5UmVmLmN1cnJlbnQubGVuZ3RoID4gMSkge1xuICAgICAgLy8gUmVtb3ZlIGN1cnJlbnQgc3RhdGVcbiAgICAgIHBvbHlnb25IaXN0b3J5UmVmLmN1cnJlbnQucG9wKCk7XG4gICAgICAvLyBHZXQgcHJldmlvdXMgc3RhdGVcbiAgICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSBwb2x5Z29uSGlzdG9yeVJlZi5jdXJyZW50W3BvbHlnb25IaXN0b3J5UmVmLmN1cnJlbnQubGVuZ3RoIC0gMV07XG4gICAgICB0ZW1wVmVydGljZXNSZWYuY3VycmVudCA9IFsuLi5wcmV2aW91c1N0YXRlXTtcbiAgICAgIHNldFBvbHlnb25WZXJ0aWNlcyhbLi4ucHJldmlvdXNTdGF0ZV0pO1xuXG4gICAgICAvLyBVcGRhdGUgbWFwIGRpc3BsYXlcbiAgICAgIGlmIChtYXBJbnN0YW5jZS5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IG1hcEluc3RhbmNlLmN1cnJlbnQuZ2V0U291cmNlKCdhb2ktcmVzdWx0cycpIGFzIG1hcGxpYnJlZ2wuR2VvSlNPTlNvdXJjZTtcbiAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICBjb25zdCBjbG9zZWRDb29yZHMgPSBbLi4ucHJldmlvdXNTdGF0ZSwgcHJldmlvdXNTdGF0ZVswXV07XG4gICAgICAgICAgc291cmNlLnNldERhdGEoe1xuICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgICAgICAgZ2VvbWV0cnk6IHsgdHlwZTogJ1BvbHlnb24nLCBjb29yZGluYXRlczogW2Nsb3NlZENvb3Jkc10gfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNTdGF0ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBzb3VyY2Uuc2V0RGF0YSh7XG4gICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICBnZW9tZXRyeTogeyB0eXBlOiAnTGluZVN0cmluZycsIGNvb3JkaW5hdGVzOiBwcmV2aW91c1N0YXRlIH0sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZS5zZXREYXRhKHsgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywgZmVhdHVyZXM6IFtdIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIEtleWJvYXJkIGxpc3RlbmVyIGZvciBDdHJsK1ogLyBDbWQrWlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBlLmtleSA9PT0gJ3onICYmIGFjdGl2ZVRvb2xSZWYuY3VycmVudCA9PT0gJ3BvbHlnb24nICYmIHBvbHlnb25WZXJ0aWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVW5kbygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICB9LCBbcG9seWdvblZlcnRpY2VzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hcENvbnRhaW5lci5jdXJyZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBpbml0TWFwID0gKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQmFzaWMgY2hlY2sgZm9yIFdlYkdMIHN1cHBvcnRcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNvbnN0IGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpO1xuICAgICAgICBpZiAoIWdsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2ViR0wgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1hcExpYnJlIHNvbWV0aW1lcyB0cmllcyB0byBhY2Nlc3MgbG9jYXRpb24uaHJlZiB3aGljaCBmYWlscyBpbiBzb21lIHNhbmRib3hlZCBlbnZpcm9ubWVudHMuXG4gICAgICAgIC8vIFdlIHdyYXAgdGhlIGluc3RhbnRpYXRpb24gaW4gYSB0cnktY2F0Y2guXG4gICAgICAgIG1hcEluc3RhbmNlLmN1cnJlbnQgPSBuZXcgbWFwbGlicmVnbC5NYXAoe1xuICAgICAgICAgIGNvbnRhaW5lcjogbWFwQ29udGFpbmVyLmN1cnJlbnQhLFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICB2ZXJzaW9uOiA4LFxuICAgICAgICAgICAgc291cmNlczoge1xuICAgICAgICAgICAgICAnc3RyZWV0cyc6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmFzdGVyJyxcbiAgICAgICAgICAgICAgICB0aWxlczogW1xuICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vc2VydmVyLmFyY2dpc29ubGluZS5jb20vQXJjR0lTL3Jlc3Qvc2VydmljZXMvV29ybGRfU3RyZWV0X01hcC9NYXBTZXJ2ZXIvdGlsZS97en0ve3l9L3t4fSdcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHRpbGVTaXplOiAyNTYsXG4gICAgICAgICAgICAgICAgYXR0cmlidXRpb246ICdFc3JpJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGF5ZXJzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3N0cmVldHMtbGF5ZXInLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdyYXN0ZXInLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3N0cmVldHMnLFxuICAgICAgICAgICAgICAgIG1pbnpvb206IDAsXG4gICAgICAgICAgICAgICAgbWF4em9vbTogMTlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2VudGVyOiBbLTc0LjAwNiwgNDAuNzEyOF0sXG4gICAgICAgICAgem9vbTogMTIsXG4gICAgICAgICAgcGl0Y2g6IDAsXG4gICAgICAgICAgYmVhcmluZzogMCxcbiAgICAgICAgICBkb3VibGVDbGlja1pvb206IGZhbHNlIC8vIERpc2FibGUgdG8gYWxsb3cgcG9seWdvbiBkb3VibGUtY2xpY2sgY29tcGxldGlvblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVcGRhdGUgY3Vyc29yIGJhc2VkIG9uIGFjdGl2ZSB0b29sXG4gICAgICAgIGNvbnN0IHVwZGF0ZUN1cnNvciA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoIW1hcEluc3RhbmNlLmN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBjYW52YXMgPSBtYXBJbnN0YW5jZS5jdXJyZW50LmdldENhbnZhcygpO1xuXG4gICAgICAgICAgaWYgKGFjdGl2ZVRvb2xSZWYuY3VycmVudCA9PT0gJ2hhbmQnKSB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVUb29sUmVmLmN1cnJlbnQgPT09ICdib3gnIHx8IGFjdGl2ZVRvb2xSZWYuY3VycmVudCA9PT0gJ3BvbHlnb24nKSB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG1hcEluc3RhbmNlLmN1cnJlbnQub24oJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XG4gICAgICAgICAgaWYgKCFtYXBJbnN0YW5jZS5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgICAgICAvLyBJbml0aWFsaXplIEdlb0pTT04gc291cmNlIGZvciBBT0kgKGJvdGggd2l6YXJkIGFuZCByZXN1bHRzIHZpZXcpXG4gICAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5hZGRTb3VyY2UoJ2FvaS1yZXN1bHRzJywge1xuICAgICAgICAgICAgdHlwZTogJ2dlb2pzb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG1hcEluc3RhbmNlLmN1cnJlbnQuYWRkTGF5ZXIoe1xuICAgICAgICAgICAgaWQ6ICdhb2ktZmlsbCcsXG4gICAgICAgICAgICB0eXBlOiAnZmlsbCcsXG4gICAgICAgICAgICBzb3VyY2U6ICdhb2ktcmVzdWx0cycsXG4gICAgICAgICAgICBwYWludDogeyAnZmlsbC1jb2xvcic6ICcjNjM2NmYxJywgJ2ZpbGwtb3BhY2l0eSc6IDAuMiB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBJbnN0YW5jZS5jdXJyZW50LmFkZExheWVyKHtcbiAgICAgICAgICAgIGlkOiAnYW9pLW91dGxpbmUnLFxuICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgc291cmNlOiAnYW9pLXJlc3VsdHMnLFxuICAgICAgICAgICAgcGFpbnQ6IHsgJ2xpbmUtY29sb3InOiAnIzRmNDZlNScsICdsaW5lLXdpZHRoJzogMiB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBMb2FkIGluaXRpYWwgR2VvSlNPTiBmb3Igbm9uLXdpemFyZCBtYXBzIChlLmcuLCBwcm9jZXNzaW5nIHNjcmVlbiwgZGFzaGJvYXJkKVxuICAgICAgICAgIGlmICghaXNXaXphcmQgJiYgaW5pdGlhbEdlb0pTT04pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIW1hcEluc3RhbmNlLmN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gbWFwSW5zdGFuY2UuY3VycmVudC5nZXRTb3VyY2UoJ2FvaS1yZXN1bHRzJykgYXMgbWFwbGlicmVnbC5HZW9KU09OU291cmNlO1xuICAgICAgICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLnNldERhdGEoaW5pdGlhbEdlb0pTT04pO1xuICAgICAgICAgICAgICAgIC8vIEZpdCBtYXAgdG8gQU9JIGJvdW5kc1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IG5ldyBtYXBsaWJyZWdsLkxuZ0xhdEJvdW5kcygpO1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsR2VvSlNPTi5nZW9tZXRyeS50eXBlID09PSAnUG9seWdvbicpIHtcbiAgICAgICAgICAgICAgICAgIGluaXRpYWxHZW9KU09OLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdLmZvckVhY2goKGNvb3JkOiBudW1iZXJbXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBib3VuZHMuZXh0ZW5kKGNvb3JkIGFzIFtudW1iZXIsIG51bWJlcl0pO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBtYXBJbnN0YW5jZS5jdXJyZW50LmZpdEJvdW5kcyhib3VuZHMsIHsgcGFkZGluZzogMjAsIGR1cmF0aW9uOiAwIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgaW50ZXJhY3RpdmUgZHJhd2luZyAoYm94IGFuZCBwb2x5Z29uIG1vZGVzKVxuICAgICAgICAgIGxldCBzdGFydFBvaW50OiBbbnVtYmVyLCBudW1iZXJdIHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGlzRHJhZ2dpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIG1hcEluc3RhbmNlLmN1cnJlbnQub24oJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTW91c2UgZG93biBldmVudCBmaXJlZCwgY3VycmVudCB0b29sOicsIGFjdGl2ZVRvb2xSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBpZiAoYWN0aXZlVG9vbFJlZi5jdXJyZW50ID09PSAnYm94Jykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgYm94IGRyYXcgYXQ6JywgZS5sbmdMYXQpO1xuICAgICAgICAgICAgICBpc0RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IFtlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdF07XG4gICAgICAgICAgICAgIG1hcEluc3RhbmNlLmN1cnJlbnQhLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9ICdjcm9zc2hhaXInO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5vbignbW91c2Vtb3ZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0RyYWdnaW5nICYmIHN0YXJ0UG9pbnQgJiYgYWN0aXZlVG9vbFJlZi5jdXJyZW50ID09PSAnYm94Jykge1xuICAgICAgICAgICAgICBjb25zdCBlbmRQb2ludDogW251bWJlciwgbnVtYmVyXSA9IFtlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdF07XG4gICAgICAgICAgICAgIGNvbnN0IGJveCA9IFtcbiAgICAgICAgICAgICAgICBbc3RhcnRQb2ludFswXSwgc3RhcnRQb2ludFsxXV0sXG4gICAgICAgICAgICAgICAgW2VuZFBvaW50WzBdLCBzdGFydFBvaW50WzFdXSxcbiAgICAgICAgICAgICAgICBbZW5kUG9pbnRbMF0sIGVuZFBvaW50WzFdXSxcbiAgICAgICAgICAgICAgICBbc3RhcnRQb2ludFswXSwgZW5kUG9pbnRbMV1dLFxuICAgICAgICAgICAgICAgIFtzdGFydFBvaW50WzBdLCBzdGFydFBvaW50WzFdXVxuICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IG1hcEluc3RhbmNlLmN1cnJlbnQhLmdldFNvdXJjZSgnYW9pLXJlc3VsdHMnKSBhcyBtYXBsaWJyZWdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgICAgICAgIHNvdXJjZS5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbYm94XVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBJbnN0YW5jZS5jdXJyZW50Lm9uKCdtb3VzZXVwJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0RyYWdnaW5nICYmIHN0YXJ0UG9pbnQgJiYgYWN0aXZlVG9vbFJlZi5jdXJyZW50ID09PSAnYm94Jykge1xuICAgICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbnN0IGVuZFBvaW50OiBbbnVtYmVyLCBudW1iZXJdID0gW2UubG5nTGF0LmxuZywgZS5sbmdMYXQubGF0XTtcbiAgICAgICAgICAgICAgY29uc3QgYm94ID0gW1xuICAgICAgICAgICAgICAgIFtzdGFydFBvaW50WzBdLCBzdGFydFBvaW50WzFdXSxcbiAgICAgICAgICAgICAgICBbZW5kUG9pbnRbMF0sIHN0YXJ0UG9pbnRbMV1dLFxuICAgICAgICAgICAgICAgIFtlbmRQb2ludFswXSwgZW5kUG9pbnRbMV1dLFxuICAgICAgICAgICAgICAgIFtzdGFydFBvaW50WzBdLCBlbmRQb2ludFsxXV0sXG4gICAgICAgICAgICAgICAgW3N0YXJ0UG9pbnRbMF0sIHN0YXJ0UG9pbnRbMV1dXG4gICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZTogR2VvSlNPTi5GZWF0dXJlID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtib3hdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IG1hcEluc3RhbmNlLmN1cnJlbnQhLmdldFNvdXJjZSgnYW9pLXJlc3VsdHMnKSBhcyBtYXBsaWJyZWdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgICAgICAgIHNvdXJjZS5zZXREYXRhKGZlYXR1cmUpO1xuXG4gICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBhcmVhIHVzaW5nIHR1cmZcbiAgICAgICAgICAgICAgaWYgKGlzV2l6YXJkICYmIG9uQXJlYVNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJlYSA9IHR1cmYuYXJlYShmZWF0dXJlKSAvIDFfMDAwXzAwMDsgLy8gQ29udmVydCB0byBrbcKyXG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudEdlb0pTT04oZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgb25BcmVhU2VsZWN0ZWQoTWF0aC5yb3VuZChhcmVhICogMTAwKSAvIDEwMCwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBtYXBJbnN0YW5jZS5jdXJyZW50IS5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBQb2x5Z29uIGRyYXdpbmcgd2l0aCBjbGljay10by1hZGQtdmVydGV4XG4gICAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NsaWNrIGV2ZW50IGZpcmVkLCBjdXJyZW50IHRvb2w6JywgYWN0aXZlVG9vbFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVUb29sUmVmLmN1cnJlbnQgPT09ICdwb2x5Z29uJykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIHBvbHlnb24gdmVydGV4IGF0OicsIGUubG5nTGF0KTtcbiAgICAgICAgICAgICAgY29uc3QgcG9pbnQ6IFtudW1iZXIsIG51bWJlcl0gPSBbZS5sbmdMYXQubG5nLCBlLmxuZ0xhdC5sYXRdO1xuICAgICAgICAgICAgICB0ZW1wVmVydGljZXNSZWYuY3VycmVudC5wdXNoKHBvaW50KTtcbiAgICAgICAgICAgICAgc2V0UG9seWdvblZlcnRpY2VzKFsuLi50ZW1wVmVydGljZXNSZWYuY3VycmVudF0pO1xuXG4gICAgICAgICAgICAgIC8vIFNhdmUgdG8gaGlzdG9yeSBmb3IgdW5kb1xuICAgICAgICAgICAgICBwb2x5Z29uSGlzdG9yeVJlZi5jdXJyZW50LnB1c2goWy4uLnRlbXBWZXJ0aWNlc1JlZi5jdXJyZW50XSk7XG5cbiAgICAgICAgICAgICAgLy8gRHJhdyB0aGUgcG9seWdvbiBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgICBpZiAodGVtcFZlcnRpY2VzUmVmLmN1cnJlbnQubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZWRDb29yZHMgPSBbLi4udGVtcFZlcnRpY2VzUmVmLmN1cnJlbnQsIHRlbXBWZXJ0aWNlc1JlZi5jdXJyZW50WzBdXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBtYXBJbnN0YW5jZS5jdXJyZW50IS5nZXRTb3VyY2UoJ2FvaS1yZXN1bHRzJykgYXMgbWFwbGlicmVnbC5HZW9KU09OU291cmNlO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtjbG9zZWRDb29yZHNdXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmVydGljZXNSZWYuY3VycmVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBtYXBJbnN0YW5jZS5jdXJyZW50IS5nZXRTb3VyY2UoJ2FvaS1yZXN1bHRzJykgYXMgbWFwbGlicmVnbC5HZW9KU09OU291cmNlO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRlbXBWZXJ0aWNlc1JlZi5jdXJyZW50XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gRG91YmxlLWNsaWNrIHRvIGZpbmlzaCBwb2x5Z29uXG4gICAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5vbignZGJsY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRvb2xSZWYuY3VycmVudCA9PT0gJ3BvbHlnb24nICYmIHRlbXBWZXJ0aWNlcy5sZW5ndGggPj0gMykge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgY29uc3QgY2xvc2VkQ29vcmRzID0gWy4uLnRlbXBWZXJ0aWNlcywgdGVtcFZlcnRpY2VzWzBdXTtcbiAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZTogR2VvSlNPTi5GZWF0dXJlID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtjbG9zZWRDb29yZHNdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IG1hcEluc3RhbmNlLmN1cnJlbnQhLmdldFNvdXJjZSgnYW9pLXJlc3VsdHMnKSBhcyBtYXBsaWJyZWdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgICAgICAgIHNvdXJjZS5zZXREYXRhKGZlYXR1cmUpO1xuXG4gICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBhcmVhIHVzaW5nIHR1cmZcbiAgICAgICAgICAgICAgaWYgKGlzV2l6YXJkICYmIG9uQXJlYVNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJlYSA9IHR1cmYuYXJlYShmZWF0dXJlKSAvIDFfMDAwXzAwMDsgLy8gQ29udmVydCB0byBrbcKyXG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudEdlb0pTT04oZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgb25BcmVhU2VsZWN0ZWQoTWF0aC5yb3VuZChhcmVhICogMTAwKSAvIDEwMCwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBSZXNldFxuICAgICAgICAgICAgICB0ZW1wVmVydGljZXNSZWYuY3VycmVudCA9IFtdO1xuICAgICAgICAgICAgICBwb2x5Z29uSGlzdG9yeVJlZi5jdXJyZW50ID0gW107IC8vIENsZWFyIHVuZG8gaGlzdG9yeVxuICAgICAgICAgICAgICBzZXRQb2x5Z29uVmVydGljZXMoW10pO1xuICAgICAgICAgICAgICBtYXBJbnN0YW5jZS5jdXJyZW50IS5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5vbignZXJyb3InLCAoZSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNYXBMaWJyZSBpbnRlcm5hbCBlcnJvcjpcIiwgZSk7XG4gICAgICAgICAgLy8gSWYgYSBmYXRhbCByZW5kZXJpbmcgZXJyb3IgaGFwcGVucyBhZnRlciBpbml0LCB3ZSBzdGlsbCBzd2l0Y2hcbiAgICAgICAgICBpZiAoZS5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3dlYmdsJykgfHwgZS5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ0xvY2F0aW9uJykpIHtcbiAgICAgICAgICAgIHNldFVzZVNpbXVsYXRpb24odHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiTWFwIGluaXRpYWxpemF0aW9uIGZhaWxlZCwgc3dpdGNoaW5nIHRvIFNpbXVsYXRpb24gTW9kZTpcIiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBzZXRVc2VTaW11bGF0aW9uKHRydWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpbml0TWFwKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKG1hcEluc3RhbmNlLmN1cnJlbnQpIHtcbiAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5yZW1vdmUoKTtcbiAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2lzV2l6YXJkXSk7XG5cbiAgLy8gTG9hZCBpbml0aWFsR2VvSlNPTiB3aGVuIGl0IGNoYW5nZXMgKGZvciBwcm9jZXNzaW5nIHNjcmVlbiwgZXRjLilcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzV2l6YXJkICYmIGluaXRpYWxHZW9KU09OICYmIG1hcEluc3RhbmNlLmN1cnJlbnQgJiYgaXNMb2FkZWQpIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IG1hcEluc3RhbmNlLmN1cnJlbnQuZ2V0U291cmNlKCdhb2ktcmVzdWx0cycpIGFzIG1hcGxpYnJlZ2wuR2VvSlNPTlNvdXJjZTtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgc291cmNlLnNldERhdGEoaW5pdGlhbEdlb0pTT04pO1xuICAgICAgICAvLyBGaXQgbWFwIHRvIEFPSSBib3VuZHNcbiAgICAgICAgY29uc3QgYm91bmRzID0gbmV3IG1hcGxpYnJlZ2wuTG5nTGF0Qm91bmRzKCk7XG4gICAgICAgIGlmIChpbml0aWFsR2VvSlNPTi5nZW9tZXRyeS50eXBlID09PSAnUG9seWdvbicpIHtcbiAgICAgICAgICBpbml0aWFsR2VvSlNPTi5nZW9tZXRyeS5jb29yZGluYXRlc1swXS5mb3JFYWNoKChjb29yZDogbnVtYmVyW10pID0+IHtcbiAgICAgICAgICAgIGJvdW5kcy5leHRlbmQoY29vcmQgYXMgW251bWJlciwgbnVtYmVyXSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5maXRCb3VuZHMoYm91bmRzLCB7IHBhZGRpbmc6IDUwLCBkdXJhdGlvbjogMTAwMCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2luaXRpYWxHZW9KU09OLCBpc1dpemFyZCwgaXNMb2FkZWRdKTtcblxuICBjb25zdCB6b29tSW4gPSAoKSA9PiBtYXBJbnN0YW5jZS5jdXJyZW50Py56b29tSW4oKTtcbiAgY29uc3Qgem9vbU91dCA9ICgpID0+IG1hcEluc3RhbmNlLmN1cnJlbnQ/Lnpvb21PdXQoKTtcbiAgY29uc3QgcmVzZXROb3J0aCA9ICgpID0+IG1hcEluc3RhbmNlLmN1cnJlbnQ/LnJlc2V0Tm9ydGhQaXRjaCgpO1xuXG4gIC8vIEV4cG9zZSBtZXRob2RzIHRvIHBhcmVudCB2aWEgcmVmXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGZseVRvOiAobGF0OiBudW1iZXIsIGxvbjogbnVtYmVyLCBib3VuZHM/OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSkgPT4ge1xuICAgICAgaWYgKCFtYXBJbnN0YW5jZS5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGlmIChib3VuZHMpIHtcbiAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5maXRCb3VuZHMoXG4gICAgICAgICAgW2JvdW5kc1swXSwgYm91bmRzWzFdLCBib3VuZHNbMl0sIGJvdW5kc1szXV0sXG4gICAgICAgICAgeyBwYWRkaW5nOiA1MCwgZHVyYXRpb246IDEwMDAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5mbHlUbyh7XG4gICAgICAgICAgY2VudGVyOiBbbG9uLCBsYXRdLFxuICAgICAgICAgIHpvb206IDEyLFxuICAgICAgICAgIGR1cmF0aW9uOiAxMDAwXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAob25Mb2NhdGlvbkNoYW5nZSkge1xuICAgICAgICBvbkxvY2F0aW9uQ2hhbmdlKGxhdCwgbG9uKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxvYWRHZW9KU09OOiAoZ2VvanNvbjogR2VvSlNPTi5GZWF0dXJlIHwgR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbikgPT4ge1xuICAgICAgaWYgKCFtYXBJbnN0YW5jZS5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IG1hcEluc3RhbmNlLmN1cnJlbnQuZ2V0U291cmNlKCdhb2ktcmVzdWx0cycpIGFzIG1hcGxpYnJlZ2wuR2VvSlNPTlNvdXJjZTtcbiAgICAgIGlmICghc291cmNlKSByZXR1cm47XG5cbiAgICAgIC8vIEhhbmRsZSBib3RoIEZlYXR1cmUgYW5kIEZlYXR1cmVDb2xsZWN0aW9uXG4gICAgICBsZXQgZmVhdHVyZTogR2VvSlNPTi5GZWF0dXJlO1xuICAgICAgaWYgKGdlb2pzb24udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICAvLyBVc2UgdGhlIGZpcnN0IHBvbHlnb24vbXVsdGlwb2x5Z29uIGZlYXR1cmVcbiAgICAgICAgY29uc3QgcG9seUZlYXR1cmUgPSBnZW9qc29uLmZlYXR1cmVzLmZpbmQoZiA9PlxuICAgICAgICAgIGYuZ2VvbWV0cnkgJiYgWydQb2x5Z29uJywgJ011bHRpUG9seWdvbiddLmluY2x1ZGVzKGYuZ2VvbWV0cnkudHlwZSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFwb2x5RmVhdHVyZSkgcmV0dXJuO1xuICAgICAgICBmZWF0dXJlID0gcG9seUZlYXR1cmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmZWF0dXJlID0gZ2VvanNvbjtcbiAgICAgIH1cblxuICAgICAgc291cmNlLnNldERhdGEoZmVhdHVyZSk7XG4gICAgICBzZXRDdXJyZW50R2VvSlNPTihmZWF0dXJlKTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIGFyZWFcbiAgICAgIGNvbnN0IGFyZWEgPSB0dXJmLmFyZWEoZmVhdHVyZSkgLyAxXzAwMF8wMDA7IC8vIGttwrJcbiAgICAgIGlmIChvbkFyZWFTZWxlY3RlZCkge1xuICAgICAgICBvbkFyZWFTZWxlY3RlZChNYXRoLnJvdW5kKGFyZWEgKiAxMDApIC8gMTAwLCBmZWF0dXJlKTtcbiAgICAgIH1cblxuICAgICAgLy8gRml0IG1hcCB0byBnZW9tZXRyeSBib3VuZHNcbiAgICAgIGNvbnN0IGJib3ggPSB0dXJmLmJib3goZmVhdHVyZSk7XG4gICAgICBtYXBJbnN0YW5jZS5jdXJyZW50LmZpdEJvdW5kcyhcbiAgICAgICAgW2Jib3hbMF0sIGJib3hbMV0sIGJib3hbMl0sIGJib3hbM11dLFxuICAgICAgICB7IHBhZGRpbmc6IDUwLCBkdXJhdGlvbjogMTAwMCB9XG4gICAgICApO1xuICAgIH0sXG4gICAgY2xlYXJBT0k6ICgpID0+IHtcbiAgICAgIGlmICghbWFwSW5zdGFuY2UuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBzb3VyY2UgPSBtYXBJbnN0YW5jZS5jdXJyZW50LmdldFNvdXJjZSgnYW9pLXJlc3VsdHMnKSBhcyBtYXBsaWJyZWdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS5zZXREYXRhKHtcbiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc2V0Q3VycmVudEdlb0pTT04obnVsbCk7XG4gICAgICBzZXRQb2x5Z29uVmVydGljZXMoW10pO1xuICAgICAgaWYgKG9uQXJlYVNlbGVjdGVkKSB7XG4gICAgICAgIG9uQXJlYVNlbGVjdGVkKDApO1xuICAgICAgfVxuICAgIH1cbiAgfSkpO1xuXG4gIC8vIElmIE1hcExpYnJlIGluaXRpYWxpemF0aW9uIGZhaWxlZCwgc2hvdyBlcnJvciBzdGF0ZVxuICBpZiAodXNlU2ltdWxhdGlvbikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YHJlbGF0aXZlIGJnLXNsYXRlLTUwIG92ZXJmbG93LWhpZGRlbiAke2NsYXNzTmFtZX0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJgfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy1tZCBteC1hdXRvIHRleHQtY2VudGVyIHAtOCBzcGFjZS15LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTYgaC0xNiBiZy1yb3NlLTEwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbXgtYXV0b1wiPlxuICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cInctOCBoLTggdGV4dC1yb3NlLTYwMFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTkwMFwiPk1hcCBVbmF2YWlsYWJsZTwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIGxlYWRpbmctcmVsYXhlZFwiPlxuICAgICAgICAgICAgICBVbmFibGUgdG8gaW5pdGlhbGl6ZSB0aGUgaW50ZXJhY3RpdmUgbWFwLiBUaGlzIG1heSBiZSBkdWUgdG8gV2ViR0wgbm90IGJlaW5nIHN1cHBvcnRlZCBvciBlbmFibGVkIGluIHlvdXIgYnJvd3Nlci5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXNsYXRlLTEwMCByb3VuZGVkLWxnIHAtNCB0ZXh0LWxlZnQgc3BhY2UteS0yXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMFwiPlRyb3VibGVzaG9vdGluZzo8L3A+XG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXNsYXRlLTYwMCBzcGFjZS15LTEgbGlzdC1kaXNjIGxpc3QtaW5zaWRlXCI+XG4gICAgICAgICAgICAgIDxsaT5FbnN1cmUgV2ViR0wgaXMgZW5hYmxlZCBpbiB5b3VyIGJyb3dzZXIgc2V0dGluZ3M8L2xpPlxuICAgICAgICAgICAgICA8bGk+VXBkYXRlIHlvdXIgZ3JhcGhpY3MgZHJpdmVyczwvbGk+XG4gICAgICAgICAgICAgIDxsaT5UcnkgYSBkaWZmZXJlbnQgYnJvd3NlciAoQ2hyb21lLCBGaXJlZm94LCBvciBFZGdlKTwvbGk+XG4gICAgICAgICAgICAgIDxsaT5EaXNhYmxlIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiBhbmQgcmUtZW5hYmxlIGl0PC9saT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWluZGlnby02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIHRleHQtc20gZm9udC1tZWRpdW0gaG92ZXI6YmctaW5kaWdvLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgUmVsb2FkIFBhZ2VcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YHJlbGF0aXZlIGJnLXNsYXRlLTUwIG92ZXJmbG93LWhpZGRlbiBncm91cCAke2NsYXNzTmFtZX0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJgfT5cbiAgICAgIHshaXNMb2FkZWQgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0zIHRleHQtc2xhdGUtNDAwIHotMjBcIj5cbiAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTggaC04IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0XCI+TG9hZGluZyBNYXAgRW5naW5lLi4uPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIDxkaXYgcmVmPXttYXBDb250YWluZXJ9IGNsYXNzTmFtZT17YGFic29sdXRlIGluc2V0LTAgdy1mdWxsIGgtZnVsbCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tNzAwICR7aXNMb2FkZWQgPyAnb3BhY2l0eS0xMDAnIDogJ29wYWNpdHktMCd9YH0gLz5cblxuICAgICAge2lzTG9hZGVkICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTQgdG9wLTQgc3BhY2UteS0yIHotMTBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ciByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHNoYWRvdy1sZyBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3pvb21Jbn0gY2xhc3NOYW1lPVwicC0yIGhvdmVyOmJnLXNsYXRlLTEwMCBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwXCI+PFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXNsYXRlLTYwMFwiIC8+PC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17em9vbU91dH0gY2xhc3NOYW1lPVwicC0yIGhvdmVyOmJnLXNsYXRlLTEwMFwiPjxNaW51cyBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtc2xhdGUtNjAwXCIgLz48L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtyZXNldE5vcnRofSBjbGFzc05hbWU9XCJwLTIgYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ciByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHNoYWRvdy1sZyBob3ZlcjpiZy1zbGF0ZS0xMDAgdHJhbnNpdGlvbi1jb2xvcnNcIj5cbiAgICAgICAgICAgICAgPE5hdmlnYXRpb24gY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXNsYXRlLTYwMFwiIC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC00IHRvcC00IHotMTBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ciByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHNoYWRvdy1sZyBmbGV4IGZsZXgtY29sIHAtMVwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVG9vbCgnaGFuZCcpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtMiByb3VuZGVkLW1kIHRyYW5zaXRpb24tY29sb3JzICR7YWN0aXZlVG9vbCA9PT0gJ2hhbmQnID8gJ2JnLWluZGlnby01MCB0ZXh0LWluZGlnby02MDAnIDogJ2hvdmVyOmJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTYwMCd9YH1cbiAgICAgICAgICAgICAgICB0aXRsZT1cIlBhbiAmIFpvb21cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPE1vdXNlUG9pbnRlcjIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICB7aXNXaXphcmQgJiYgKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRvb2woJ2JveCcpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwLTIgcm91bmRlZC1tZCB0cmFuc2l0aW9uLWNvbG9ycyAke2FjdGl2ZVRvb2wgPT09ICdib3gnID8gJ2JnLWluZGlnby01MCB0ZXh0LWluZGlnby02MDAnIDogJ2hvdmVyOmJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTYwMCd9YH1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJEcmF3IFJlY3RhbmdsZVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxCb3ggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVG9vbCgncG9seWdvbicpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwLTIgcm91bmRlZC1tZCB0cmFuc2l0aW9uLWNvbG9ycyAke2FjdGl2ZVRvb2wgPT09ICdwb2x5Z29uJyA/ICdiZy1pbmRpZ28tNTAgdGV4dC1pbmRpZ28tNjAwJyA6ICdob3ZlcjpiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS02MDAnfWB9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRHJhdyBQb2x5Z29uXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFBlbnRhZ29uIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICB7cG9seWdvblZlcnRpY2VzLmxlbmd0aCA+IDAgJiYgYWN0aXZlVG9vbCA9PT0gJ3BvbHlnb24nICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVVuZG99XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHJvdW5kZWQtbWQgaG92ZXI6YmctYW1iZXItNTAgdGV4dC1hbWJlci02MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVW5kbyBMYXN0IFBvaW50IChDdHJsK1opXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxVbmRvMiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgeyhjdXJyZW50R2VvSlNPTiB8fCBwb2x5Z29uVmVydGljZXMubGVuZ3RoID4gMCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gbWFwSW5zdGFuY2UuY3VycmVudD8uZ2V0U291cmNlKCdhb2ktcmVzdWx0cycpIGFzIG1hcGxpYnJlZ2wuR2VvSlNPTlNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLnNldERhdGEoeyB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLCBmZWF0dXJlczogW10gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50R2VvSlNPTihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFBvbHlnb25WZXJ0aWNlcyhbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wVmVydGljZXNSZWYuY3VycmVudCA9IFtdOyAvLyBDbGVhciB0ZW1wIHZlcnRpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uSGlzdG9yeVJlZi5jdXJyZW50ID0gW107IC8vIENsZWFyIHVuZG8gaGlzdG9yeVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlVG9vbCgnaGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQXJlYVNlbGVjdGVkKSBvbkFyZWFTZWxlY3RlZCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMiByb3VuZGVkLW1kIGhvdmVyOmJnLXJvc2UtNTAgdGV4dC1yb3NlLTYwMCB0cmFuc2l0aW9uLWNvbG9ycyBib3JkZXItdCBib3JkZXItc2xhdGUtMjAwXCJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkNsZWFyIEFPSVwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTQgbGVmdC00IHJpZ2h0LTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtZW5kIHBvaW50ZXItZXZlbnRzLW5vbmUgei0xMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1zbGF0ZS05MDAvODUgYmFja2Ryb3AtYmx1ciB0ZXh0LXdoaXRlIHB4LTMgcHktMS41IHJvdW5kZWQtbGcgdGV4dC1bMTBweF0gZm9udC1tZWRpdW0gcG9pbnRlci1ldmVudHMtYXV0byBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8TWFwSWNvbiBjbGFzc05hbWU9XCJ3LTMgaC0zIHRleHQtaW5kaWdvLTQwMFwiIC8+XG4gICAgICAgICAgICAgIE1hcExpYnJlIEdMIEVuZ2luZSB8IEVTUkkgV29ybGQgU3RyZWV0IE1hcFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTIgcG9pbnRlci1ldmVudHMtYXV0b1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXIgcHgtMyBweS0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgc2hhZG93LWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS03MDAgaG92ZXI6Ymctc2xhdGUtMTAwXCI+XG4gICAgICAgICAgICAgICAgPExheWVycyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gTGF5ZXJzXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJnLXdoaXRlLzk1IGJhY2tkcm9wLWJsdXIgcC0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgc2hhZG93LWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGhvdmVyOmJnLXNsYXRlLTEwMFwiPlxuICAgICAgICAgICAgICAgIDxNYXhpbWl6ZTIgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXNsYXRlLTYwMFwiIC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBNYXBWaWV3O1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIm1hcGxpYnJlZ2wiLCJ0dXJmIiwiTWF4aW1pemUyIiwiTGF5ZXJzIiwiTW91c2VQb2ludGVyMiIsIlBsdXMiLCJNaW51cyIsIk5hdmlnYXRpb24iLCJCb3giLCJMb2FkZXIyIiwiQWxlcnRDaXJjbGUiLCJNYXAiLCJNYXBJY29uIiwiUGVudGFnb24iLCJUcmFzaDIiLCJVbmRvMiIsIk1hcFZpZXciLCJyZWYiLCJjbGFzc05hbWUiLCJpc1dpemFyZCIsIm9uQXJlYVNlbGVjdGVkIiwib25Mb2NhdGlvbkNoYW5nZSIsImluaXRpYWxHZW9KU09OIiwibWFwQ29udGFpbmVyIiwibWFwSW5zdGFuY2UiLCJpc0xvYWRlZCIsInNldElzTG9hZGVkIiwidXNlU2ltdWxhdGlvbiIsInNldFVzZVNpbXVsYXRpb24iLCJhY3RpdmVUb29sIiwic2V0QWN0aXZlVG9vbCIsImFjdGl2ZVRvb2xSZWYiLCJwb2x5Z29uVmVydGljZXMiLCJzZXRQb2x5Z29uVmVydGljZXMiLCJ0ZW1wVmVydGljZXNSZWYiLCJwb2x5Z29uSGlzdG9yeVJlZiIsImN1cnJlbnRHZW9KU09OIiwic2V0Q3VycmVudEdlb0pTT04iLCJjdXJyZW50IiwiY2FudmFzIiwiZ2V0Q2FudmFzIiwibWFwIiwiY29uc29sZSIsImxvZyIsInN0eWxlIiwiY3Vyc29yIiwiZHJhZ1BhbiIsImVuYWJsZSIsImRpc2FibGUiLCJoYW5kbGVVbmRvIiwibGVuZ3RoIiwicG9wIiwicHJldmlvdXNTdGF0ZSIsInNvdXJjZSIsImdldFNvdXJjZSIsImNsb3NlZENvb3JkcyIsInNldERhdGEiLCJ0eXBlIiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsInByb3BlcnRpZXMiLCJmZWF0dXJlcyIsImhhbmRsZUtleURvd24iLCJlIiwiY3RybEtleSIsIm1ldGFLZXkiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5pdE1hcCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImdsIiwiZ2V0Q29udGV4dCIsIkVycm9yIiwiY29udGFpbmVyIiwidmVyc2lvbiIsInNvdXJjZXMiLCJ0aWxlcyIsInRpbGVTaXplIiwiYXR0cmlidXRpb24iLCJsYXllcnMiLCJpZCIsIm1pbnpvb20iLCJtYXh6b29tIiwiY2VudGVyIiwiem9vbSIsInBpdGNoIiwiYmVhcmluZyIsImRvdWJsZUNsaWNrWm9vbSIsInVwZGF0ZUN1cnNvciIsIm9uIiwiYWRkU291cmNlIiwiZGF0YSIsImFkZExheWVyIiwicGFpbnQiLCJzZXRUaW1lb3V0IiwiYm91bmRzIiwiTG5nTGF0Qm91bmRzIiwiZm9yRWFjaCIsImNvb3JkIiwiZXh0ZW5kIiwiZml0Qm91bmRzIiwicGFkZGluZyIsImR1cmF0aW9uIiwic3RhcnRQb2ludCIsImlzRHJhZ2dpbmciLCJsbmdMYXQiLCJsbmciLCJsYXQiLCJlbmRQb2ludCIsImJveCIsImZlYXR1cmUiLCJhcmVhIiwiTWF0aCIsInJvdW5kIiwicG9pbnQiLCJwdXNoIiwidGVtcFZlcnRpY2VzIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJlcnIiLCJ3YXJuIiwicmVtb3ZlIiwiem9vbUluIiwiem9vbU91dCIsInJlc2V0Tm9ydGgiLCJyZXNldE5vcnRoUGl0Y2giLCJmbHlUbyIsImxvbiIsImxvYWRHZW9KU09OIiwiZ2VvanNvbiIsInBvbHlGZWF0dXJlIiwiZmluZCIsImYiLCJiYm94IiwiY2xlYXJBT0kiLCJkaXYiLCJoMyIsInAiLCJ1bCIsImxpIiwiYnV0dG9uIiwib25DbGljayIsImxvY2F0aW9uIiwicmVsb2FkIiwic3BhbiIsInRpdGxlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/MapView.tsx\n"));

/***/ })

});