(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{18937:(e,s,a)=>{Promise.resolve().then(a.bind(a,49688))},49688:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var t=a(95155),l=a(12115),i=a(20063),r=a(36204),n=a(28127),d=a(18771),c=a(53489),x=a(62593),o=a(60406),m=a(45444),h=a(94915),u=a(66562),p=a(19680),j=a(85584),b=a(26302),f=a(66065),v=a(75768),N=a(56947),g=a(26991),w=a(84879),y=a(68425),S=a(47734),A=a(73697),k=a(23508),D=a(77568);function z(){let e=(0,i.useRouter)(),s=(0,i.useSearchParams)(),[a,z]=(0,l.useState)(null),[C,I]=(0,l.useState)("Iowa Field Survey 2024"),[J,O]=(0,l.useState)("Completed"),[M,R]=(0,l.useState)(["NDVI"]),[V,F]=(0,l.useState)("NDVI"),W={NDVI:[{date:"Jan 23",value:.42},{date:"Feb 23",value:.45},{date:"Mar 23",value:.58},{date:"Apr 23",value:.72},{date:"May 23",value:.85},{date:"Jun 23",value:.82},{date:"Jul 23",value:.75},{date:"Aug 23",value:.68},{date:"Sep 23",value:.55},{date:"Oct 23",value:.48},{date:"Nov 23",value:.35},{date:"Dec 23",value:.32}],NDWI:[{date:"Jan 23",value:.15},{date:"Feb 23",value:.18},{date:"Mar 23",value:.25},{date:"Apr 23",value:.35},{date:"May 23",value:.45},{date:"Jun 23",value:.38},{date:"Jul 23",value:.32},{date:"Aug 23",value:.28},{date:"Sep 23",value:.22},{date:"Oct 23",value:.19},{date:"Nov 23",value:.17},{date:"Dec 23",value:.14}],NVI:[{date:"Jan 23",value:.38},{date:"Feb 23",value:.42},{date:"Mar 23",value:.52},{date:"Apr 23",value:.65},{date:"May 23",value:.78},{date:"Jun 23",value:.75},{date:"Jul 23",value:.7},{date:"Aug 23",value:.62},{date:"Sep 23",value:.5},{date:"Oct 23",value:.44},{date:"Nov 23",value:.32},{date:"Dec 23",value:.28}]};return(0,l.useEffect)(()=>{let e=null==s?void 0:s.get("name"),a=null==s?void 0:s.get("geojson"),t=null==s?void 0:s.get("status"),l=null==s?void 0:s.get("indices");if(e&&I(decodeURIComponent(e)),t&&O(t),l)try{let e=JSON.parse(decodeURIComponent(l));R(e),e.length>0&&F(e[0])}catch(e){console.error("Failed to parse indices from URL:",e)}if(a)try{let e=JSON.parse(decodeURIComponent(a));z(e)}catch(e){console.error("Failed to parse GeoJSON from URL:",e)}},[s]),(0,t.jsxs)("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-2 duration-500",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-white z-20 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(v.$n,{variant:"ghost",size:"sm",onClick:()=>e.push("/dashboard"),children:[(0,t.jsx)(r.A,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),(0,t.jsx)("div",{className:"h-6 w-px bg-slate-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-sm font-bold text-slate-900",children:C}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[(0,t.jsx)(n.A,{className:"w-3 h-3"}),"Jan 2023 - Dec 2023 | Sentinel-2 L2A"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(v.$n,{variant:"outline",size:"sm",className:"gap-2",children:[(0,t.jsx)(d.A,{className:"w-4 h-4"})," Share"]}),(0,t.jsxs)(v.$n,{variant:"primary",size:"sm",className:"gap-2",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"})," Export Results"]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(N.A,{className:"w-full h-full",isWizard:!1,initialGeoJSON:a}),"Pending"===J&&(0,t.jsx)("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-20",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(x.A,{className:"w-8 h-8 text-amber-600 animate-pulse"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 text-center mb-2",children:"Waiting for Satellite Data"}),(0,t.jsxs)("p",{className:"text-sm text-slate-600 text-center leading-relaxed",children:["This analysis is queued and waiting for the next satellite pass over your area of interest. Data acquisition can take up to ",(0,t.jsx)("span",{className:"font-bold text-slate-900",children:"48 hours"})," depending on orbital patterns and cloud coverage."]}),(0,t.jsx)("div",{className:"mt-6 p-3 bg-amber-50 rounded-lg border border-amber-100",children:(0,t.jsx)("p",{className:"text-xs text-amber-900 text-center",children:"You'll receive an email notification when processing begins."})})]})}),"Canceled"===J&&(0,t.jsx)("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-20",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(o.A,{className:"w-8 h-8 text-rose-600"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 text-center mb-2",children:"Analysis Cancelled"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 text-center leading-relaxed mb-4",children:"This analysis was cancelled and will not be processed. Common reasons include:"}),(0,t.jsxs)("ul",{className:"text-xs text-slate-600 space-y-2 mb-6",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-rose-500 mt-0.5",children:"•"}),(0,t.jsx)("span",{children:"Excessive cloud coverage in the selected time period"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-rose-500 mt-0.5",children:"•"}),(0,t.jsx)("span",{children:"User requested cancellation"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-rose-500 mt-0.5",children:"•"}),(0,t.jsx)("span",{children:"Payment or quota limits reached"})]})]}),(0,t.jsx)(v.$n,{onClick:()=>e.push("/dashboard/new-analysis"),className:"w-full",children:"Start New Analysis"})]})}),"Completed"===J&&(0,t.jsxs)("div",{className:"absolute top-6 left-6 z-10 w-64 space-y-3",children:[(0,t.jsxs)(v.Zp,{className:"p-4 bg-white/90 backdrop-blur border-none shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Mean ",V]}),(0,t.jsx)(v.Ex,{variant:"success",children:"NDVI"===V?"+12%":"NDWI"===V?"+8%":"+15%"})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsx)("span",{className:"text-2xl font-black text-slate-900",children:W[V]?W[V][W[V].length-1].value:"0.00"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 mb-1",children:"Index Value"})]})]}),(0,t.jsxs)(v.Zp,{className:"p-4 bg-white/90 backdrop-blur border-none shadow-lg",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,t.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"NDWI"===V?"Water Stress":"Biomass Health"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1 h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-emerald-500 w-[85%]"})}),(0,t.jsx)("span",{className:"text-[10px] font-bold text-slate-900",children:"Optimal"})]})]})]})]}),(0,t.jsxs)("div",{className:"w-[450px] bg-slate-50 border-l border-slate-200 overflow-y-auto custom-scrollbar flex flex-col",children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"font-bold text-slate-900 text-sm",children:"Temporal Trend Analysis"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("select",{value:V,onChange:e=>F(e.target.value),className:"text-xs px-3 py-1.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white",children:M.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)(v.$n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(m.A,{className:"w-4 h-4"})})]})]}),(0,t.jsx)(v.Zp,{className:"p-4 bg-white",children:(0,t.jsx)("div",{className:"h-48 w-full",children:(0,t.jsx)(g.u,{width:"100%",height:"100%",children:(0,t.jsxs)(w.Q,{data:W[V]||W.NDVI,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,t.jsx)(y.d,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,t.jsx)(S.W,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#94a3b8"}}),(0,t.jsx)(A.h,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#94a3b8"}}),(0,t.jsx)(k.m,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{fontSize:"12px",fontWeight:"bold"},labelStyle:{fontSize:"10px",color:"#64748b",marginBottom:"4px"}}),(0,t.jsx)(D.G,{type:"monotone",dataKey:"value",stroke:"#6366f1",strokeWidth:2,fillOpacity:1,fill:"url(#colorValue)"})]})})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(v.Zp,{className:"p-4 bg-white",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Max Value"}),(0,t.jsx)("p",{className:"text-xl font-bold text-slate-900",children:"0.85"}),(0,t.jsxs)("div",{className:"flex items-center text-emerald-600 text-[10px] font-bold mt-1",children:[(0,t.jsx)(h.A,{className:"w-3 h-3 mr-1"}),"+4.2% Peak"]})]}),(0,t.jsxs)(v.Zp,{className:"p-4 bg-white",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Standard Dev"}),(0,t.jsx)("p",{className:"text-xl font-bold text-slate-900",children:"0.12"}),(0,t.jsx)("div",{className:"text-[10px] text-slate-500 mt-1",children:"High Stability"})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"font-bold text-slate-900 text-sm mb-4",children:"Derived Assets"}),(0,t.jsx)("div",{className:"space-y-2",children:[{name:"Analysis Result Map",size:"142 MB",type:"GeoTIFF",icon:u.A},{name:"Full Statistics Report",size:"1.2 MB",type:"JSON",icon:p.A},{name:"Raw Sample Data",size:"4.5 MB",type:"CSV",icon:j.A}].map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg hover:border-indigo-200 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-slate-50 rounded group-hover:bg-indigo-50 transition-colors",children:(0,t.jsx)(e.icon,{className:"w-4 h-4 text-slate-400 group-hover:text-indigo-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold text-slate-900",children:e.name}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-500",children:[e.type," • ",e.size]})]})]}),(0,t.jsx)(v.$n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})})]},e.name))})]}),(0,t.jsxs)("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100 flex gap-3",children:[(0,t.jsx)(o.A,{className:"w-5 h-5 text-amber-600 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-bold text-amber-900",children:"Atmospheric Correction Notice"}),(0,t.jsx)("p",{className:"text-[10px] text-amber-800/80 leading-relaxed mt-1",children:"Results for Dec 23 show higher noise levels due to atmospheric particulates. Sen2Cor v2.11 applied."})]})]})]}),(0,t.jsx)("div",{className:"mt-auto p-6 border-t border-slate-200 bg-white",children:(0,t.jsxs)(v.$n,{className:"w-full gap-2",children:[(0,t.jsx)(f.A,{className:"w-4 h-4"})," Generate AI Insights"]})})]})]})]})}function C(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}),children:(0,t.jsx)(z,{})})}}},e=>{e.O(0,[600,63,472,150,441,255,358],()=>e(e.s=18937)),_N_E=e.O()}]);