(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{7545:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},12327:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>V});var a=s(95155),l=s(12115),r=s(20063),n=s(26541),i=s(62593),o=s(14294);let c=(0,o.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var d=s(72251);let x=(0,o.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var m=s(90109);let h=(0,o.A)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);var u=s(63263),p=s(75768),g=s(56947),f=s(92033),j=s(26615);let y=(0,o.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),N=e=>{let{onLocationSelect:t,className:s=""}=e,[r,n]=(0,l.useState)(""),[i,o]=(0,l.useState)([]),[c,d]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!1),[u,p]=(0,l.useState)(-1),g=(0,l.useRef)(null),N=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.useEffect)(()=>{if(g.current&&clearTimeout(g.current),r.trim().length<3){o([]),h(!1);return}return d(!0),g.current=setTimeout(async()=>{try{let e=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(r),"&limit=5"),{headers:{"User-Agent":"VerdifyDemo/1.0"}}),t=await e.json();o(t),h(t.length>0),p(-1)}catch(e){console.error("Geocoding error:",e),o([])}finally{d(!1)}},500),()=>{g.current&&clearTimeout(g.current)}},[r]);let b=e=>{let s,a=parseFloat(e.lat),l=parseFloat(e.lon);e.boundingbox&&(s=[parseFloat(e.boundingbox[2]),parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[3]),parseFloat(e.boundingbox[1])]);let r=e.display_name.split(",")[0];console.log("Location selected:",{name:r,lat:a,lon:l,bounds:s,fullDisplayName:e.display_name}),t(a,l,s,r),n(e.display_name),h(!1)};return(0,a.jsxs)("div",{ref:N,className:"relative ".concat(s),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),onKeyDown:e=>{x&&0!==i.length&&("ArrowDown"===e.key?(e.preventDefault(),p(e=>Math.min(e+1,i.length-1))):"ArrowUp"===e.key?(e.preventDefault(),p(e=>Math.max(e-1,-1))):"Enter"===e.key&&u>=0?(e.preventDefault(),b(i[u])):"Escape"===e.key&&h(!1))},onFocus:()=>i.length>0&&h(!0),placeholder:"Search for a location...",className:"w-full pl-10 pr-10 py-2.5 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm"}),c&&(0,a.jsx)(f.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-600 animate-spin"}),!c&&r&&(0,a.jsx)("button",{onClick:()=>{n(""),o([]),h(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]}),x&&i.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:i.map((e,t)=>(0,a.jsx)("button",{onClick:()=>b(e),className:"w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 ".concat(t===u?"bg-indigo-50":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(y,{className:"w-4 h-4 text-indigo-600 mt-0.5 shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900 truncate",children:e.display_name.split(",")[0]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.display_name})]})]})},e.place_id))}),x&&0===i.length&&!c&&r.length>=3&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-lg shadow-lg p-4 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:['No locations found for "',r,'"']})})]})};var b=s(19680);let v=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var w=s(78770),k=s(18527);let A=e=>{let{onFileLoad:t,className:s=""}=e,[r,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),x=(0,l.useRef)(null),m=async e=>{if(o(null),d(null),!e.name.endsWith(".json")&&!e.name.endsWith(".geojson"))return void o("Only .json or .geojson files are supported");if(e.size>5242880)return void o("File too large. Maximum size is 5MB");try{let s=await e.text(),a=JSON.parse(s),l=(e=>{if(!e||"object"!=typeof e)return{valid:!1,error:"Invalid JSON structure"};if("Feature"===e.type){if(!e.geometry||!e.geometry.type)return{valid:!1,error:"Feature missing geometry"};let t=e.geometry.type;if(!["Polygon","MultiPolygon"].includes(t))return{valid:!1,error:"Only Polygon or MultiPolygon supported, got ".concat(t)}}else{if("FeatureCollection"!==e.type)return{valid:!1,error:"Must be a GeoJSON Feature or FeatureCollection"};if(!Array.isArray(e.features))return{valid:!1,error:"FeatureCollection missing features array"};if(0===e.features.length)return{valid:!1,error:"FeatureCollection is empty"};if(!e.features.some(e=>e.geometry&&["Polygon","MultiPolygon"].includes(e.geometry.type)))return{valid:!1,error:"No valid Polygon or MultiPolygon found in FeatureCollection"}}return{valid:!0}})(a);if(!l.valid)return void o(l.error||"Invalid GeoJSON");t(a),d("".concat(e.name," loaded successfully")),setTimeout(()=>d(null),3e3)}catch(e){e instanceof SyntaxError?o("Invalid JSON syntax"):o("Failed to read file")}};return(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)("input",{ref:x,type:"file",accept:".json,.geojson",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&m(s)},className:"hidden"}),(0,a.jsx)("div",{onDrop:e=>{e.preventDefault(),n(!1);let t=e.dataTransfer.files[0];t&&m(t)},onDragOver:e=>{e.preventDefault(),n(!0)},onDragLeave:()=>{n(!1)},className:"border-2 border-dashed rounded-lg p-6 transition-all ".concat(r?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-slate-50 hover:border-slate-300"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center space-y-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(r?"bg-indigo-100":"bg-slate-100"),children:(0,a.jsx)(b.A,{className:"w-6 h-6 ".concat(r?"text-indigo-600":"text-slate-400")})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Drop GeoJSON file here"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"or click to browse"})]}),(0,a.jsxs)(p.$n,{variant:"outline",size:"sm",onClick:()=>{var e;null==(e=x.current)||e.click()},children:[(0,a.jsx)(v,{className:"w-4 h-4 mr-2"}),"Choose File"]}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Supports .json and .geojson (max 5MB)"})]})}),i&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-rose-50 border border-rose-200 rounded-lg flex items-start gap-2",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 text-rose-600 mt-0.5 shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-rose-900",children:"Error"}),(0,a.jsx)("p",{className:"text-xs text-rose-700",children:i})]}),(0,a.jsx)("button",{onClick:()=>{o(null)},className:"text-rose-400 hover:text-rose-600",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]}),c&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-emerald-50 border border-emerald-200 rounded-lg flex items-start gap-2",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 text-emerald-600 mt-0.5 shrink-0"}),(0,a.jsx)("p",{className:"text-xs text-emerald-900",children:c})]})]})};var S=s(60507),I=s(90832);let C=[{id:1,title:"Define AOI",icon:n.A},{id:2,title:"Time Period",icon:i.A},{id:3,title:"Indices",icon:c},{id:4,title:"Confirm",icon:d.A}],D=e=>{let{onCancel:t,onStart:s}=e,[r,n]=(0,l.useState)(1),[i,o]=(0,l.useState)(0),[f,j]=(0,l.useState)(null),[y,b]=(0,l.useState)(!1),v=(0,l.useRef)(null),{currentWorkspace:w}=(0,S.h)(),{addProject:k}=(0,I.B)(),[D,M]=(0,l.useState)(new Date().toISOString().split("T")[0]),[O,P]=(0,l.useState)(new Date(Date.now()+2592e6).toISOString().split("T")[0]),[F,E]=(0,l.useState)("monthly"),[z,V]=(0,l.useState)("New Analysis"),[T,_]=(0,l.useState)("Sentinel-2 L2A"),[J,L]=(0,l.useState)("20"),[G,R]=(0,l.useState)(!0),[W,q]=(0,l.useState)(["NDVI"]),B=async(e,t)=>{try{let s=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t),{headers:{"User-Agent":"VerdifyDemo/1.0"}}),a=await s.json();if(a&&a.display_name)return a.display_name.split(",")[0]}catch(e){console.error("Reverse geocoding failed:",e)}return"Selected Area"};return(0,a.jsxs)("div",{className:"fixed inset-0 bg-white z-50 flex flex-col animate-in fade-in duration-300",children:[(0,a.jsxs)("div",{className:"px-6 h-16 border-b border-slate-100 flex items-center justify-between flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(p.$n,{variant:"ghost",size:"sm",onClick:t,children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-1"}),"Back to Dashboard"]}),(0,a.jsx)("div",{className:"w-px h-6 bg-slate-200"}),(0,a.jsx)("h1",{className:"font-bold text-slate-900 tracking-tight",children:"New Analysis Configuration"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(p.$n,{variant:"outline",size:"sm",children:"Save Draft"})})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-80 border-r border-slate-100 bg-slate-50/50 p-6 space-y-8 overflow-y-auto",children:[(0,a.jsx)("div",{className:"space-y-6",children:C.map(e=>(0,a.jsxs)("div",{className:"flex gap-4 transition-all ".concat(r===e.id?"opacity-100":"opacity-40"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0 border-2 ".concat(r>=e.id?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-200 text-slate-400"),children:r>e.id?(0,a.jsx)(d.A,{className:"w-4 h-4"}):(0,a.jsx)(e.icon,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-bold text-slate-900",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Step ",e.id," of 4"]})]})]},e.id))}),(0,a.jsx)("div",{className:"pt-8 border-t border-slate-200 space-y-4",children:(0,a.jsxs)(p.Zp,{className:"p-4 bg-white/60",children:[(0,a.jsx)("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3",children:"Analysis Summary"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Satellite Source"}),(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:"Sentinel-2 L2A"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Total AOI Area"}),(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:i>0?"".concat(i," km\xb2"):"Not Selected"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Est. Processing Time"}),(0,a.jsx)("span",{className:"font-semibold text-indigo-600",children:i>0?"~2-5 min":"N/A"})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white overflow-hidden relative",children:[1===r&&(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row h-full gap-4 p-4",children:[(0,a.jsxs)("div",{className:"w-full lg:w-80 bg-slate-50 rounded-lg border border-slate-200 p-4 space-y-4 overflow-y-auto max-h-96 lg:max-h-none",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-900 mb-2",children:"Search Location"}),(0,a.jsx)(N,{onLocationSelect:(e,t,s,a)=>{var l;console.log("Wizard received location:",{name:a,lat:e,lon:t}),null==(l=v.current)||l.flyTo(e,t,s),V("".concat(a," Analysis"))}}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Search for a region or landmark to navigate the map"})]}),(0,a.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-900 mb-2",children:"Import AOI"}),(0,a.jsx)(A,{onFileLoad:e=>{var t;null==(t=v.current)||t.loadGeoJSON(e)}}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Upload a GeoJSON file to import an existing area"})]}),(0,a.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-900 mb-2",children:"Draw AOI"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:"Use the map tools to draw your area:"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-slate-200",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-slate-100 rounded flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-4 h-4 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-slate-900",children:"Rectangle Tool"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500",children:"Click and drag on map"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-slate-200",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-slate-100 rounded flex items-center justify-center",children:(0,a.jsx)(c,{className:"w-4 h-4 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-slate-900",children:"Polygon Tool"}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500",children:"Click vertices, double-click to finish"})]})]})]})]}),i>0&&(0,a.jsx)("div",{className:"border-t border-slate-200 pt-4",children:(0,a.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-indigo-900",children:"Selected Area"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:[i.toFixed(2)," km\xb2"]}),f&&(0,a.jsx)("p",{className:"text-[10px] text-indigo-600 mt-1",children:"GeoJSON ready for processing"})]})})]}),(0,a.jsx)(g.A,{ref:v,isWizard:!0,className:"flex-1 rounded-lg overflow-hidden border border-slate-200 min-h-96",onAreaSelected:async(e,t)=>{if(o(e),j(t||null),t&&"Polygon"===t.geometry.type){let e=t.geometry.coordinates[0],s=e.map(e=>e[1]),a=e.map(e=>e[0]),l=s.reduce((e,t)=>e+t,0)/s.length,r=a.reduce((e,t)=>e+t,0)/a.length,n=await B(l,r);V("".concat(n," Analysis"))}}})]}),2===r&&(0,a.jsxs)("div",{className:"p-12 max-w-2xl mx-auto space-y-8 animate-in slide-in-from-right-4 duration-300",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Select Time Range"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Choose historical data or schedule near-real-time monitoring."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-900",children:"Ongoing Analysis"}),y&&(0,a.jsx)(p.Ex,{variant:"success",children:"Active"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"Monitor this area continuously with automatic updates"})]}),(0,a.jsx)("button",{onClick:()=>b(!y),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(y?"bg-indigo-600":"bg-slate-300"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(y?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsx)(p.pd,{label:"Start Date",type:"date",value:D,onChange:e=>M(e.target.value)}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.pd,{label:"End Date",type:"date",value:O,onChange:e=>P(e.target.value),disabled:y}),y&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 rounded-lg pointer-events-none",children:(0,a.jsx)("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-200",children:"Running Indefinitely"})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Cloud Cover Threshold (%)"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"range",className:"flex-1 accent-indigo-600",min:"0",max:"100",value:J,onChange:e=>L(e.target.value)}),(0,a.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[J,"%"]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Scenes with higher cloud cover will be filtered out during processing."})]})]}),3===r&&(0,a.jsxs)("div",{className:"p-12 max-w-4xl mx-auto space-y-8 animate-in slide-in-from-right-4 duration-300",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Geospatial Indices"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Select the spectral indices to calculate for your study area."})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(p.pd,{label:"Analysis Name",value:z,onChange:e=>V(e.target.value),placeholder:"e.g. Corn Field Q3 Analysis"})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{name:"NDVI",long:"Normalized Difference Vegetation Index",desc:"Standard indicator of vegetation health and greenness."},{name:"EVI",long:"Enhanced Vegetation Index",desc:"Corrects for atmosphere and soil signals in dense biomass."},{name:"SAVI",long:"Soil-Adjusted Vegetation Index",desc:"Ideal for areas with sparse vegetation and exposed soil."},{name:"NDWI",long:"Normalized Difference Water Index",desc:"Monitor surface water bodies and moisture levels."}].map(e=>{let t=W.includes(e.name);return(0,a.jsxs)(p.Zp,{className:"p-5 border-2 transition-all cursor-pointer hover:border-indigo-200 ".concat(t?"border-indigo-600 shadow-md":"border-slate-100"),onClick:()=>{t?q(W.filter(t=>t!==e.name)):q([...W,e.name])},children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)(p.Ex,{variant:"info",children:e.name}),t&&(0,a.jsx)("div",{className:"w-5 h-5 bg-indigo-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-3 h-3 text-white"})})]}),(0,a.jsx)("h4",{className:"font-bold text-slate-900 text-sm",children:e.long}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed",children:e.desc})]},e.name)})}),(0,a.jsxs)("div",{className:"p-4 border border-slate-100 rounded-xl bg-slate-50 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(c,{className:"w-5 h-5 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-bold text-slate-900",children:"Custom Index Builder"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Define equations using band arithmetic."})]})]}),(0,a.jsx)(p.$n,{variant:"outline",size:"sm",children:"Configure"})]})]}),4===r&&(0,a.jsxs)("div",{className:"p-12 max-w-2xl mx-auto space-y-12 text-center animate-in zoom-in-95 duration-500",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(d.A,{className:"w-10 h-10"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Configuration Complete"}),(0,a.jsx)("p",{className:"text-slate-500",children:"Review your settings before launching the analysis job on the compute cluster."})]}),(0,a.jsxs)(p.Zp,{className:"text-left divide-y divide-slate-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 flex justify-between bg-slate-50/50",children:[(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Project Name"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-900",children:"Iowa Field Survey 2024"})]}),(0,a.jsxs)("div",{className:"p-4 flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Analysis Type"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-900",children:"NDVI + Time Series"})]}),(0,a.jsxs)("div",{className:"p-4 flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Scene Source"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-900",children:"Sentinel-2 (L2A, Top of Atmos)"})]}),(0,a.jsxs)("div",{className:"p-4 flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Estimated Duration"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-900",children:"~14 minutes"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-amber-50 rounded-xl border border-amber-100 text-left",children:[(0,a.jsx)(h,{className:"w-6 h-6 text-amber-600 shrink-0"}),(0,a.jsx)("p",{className:"text-xs text-amber-800 leading-relaxed",children:"Note: Computing costs for this job will be deducted from your enterprise balance immediately upon launch."})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-slate-100 flex items-center justify-between flex-shrink-0 bg-white",children:[(0,a.jsxs)(p.$n,{variant:"outline",onClick:()=>n(e=>Math.max(e-1,1)),disabled:1===r,className:1===r?"invisible":"",children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Step ",r," of ",C.length]}),(0,a.jsxs)(p.$n,{onClick:4===r?()=>{w&&(k({id:"proj-".concat(Date.now()),workspaceId:w.id,name:z||"Analysis - ".concat(new Date().toLocaleDateString()),client:"Self-Service",startDate:D,deadline:O,status:"Active",progress:0,type:W[0]||"Custom",selectedIndices:W,geojson:f||void 0}),s(f))}:()=>n(e=>Math.min(e+1,C.length)),children:[4===r?"Launch Analysis":"Next",4!==r&&(0,a.jsx)(u.A,{className:"w-4 h-4 ml-1"})]})]})]})]})};var M=s(50984),O=s(19649),P=s(17482),F=s(7545),E=s(69795);let z=e=>{let{onFinish:t,initialGeoJSON:s=null}=e,[r,n]=(0,l.useState)(0),[i,o]=(0,l.useState)(["Initializing worker nodes...","Authentication successful."]);return(0,l.useEffect)(()=>{let e=setInterval(()=>{n(t=>t>=100?(clearInterval(e),100):t+5*Math.random())},800),t=setInterval(()=>{let e=["Fetching Sentinel-2 granules...","Cloud filtering (Threshold: 15%)...","Extracting spectral bands (B4, B8)...","Computing NDVI matrix...","Generating AOI aggregate statistics...","Applying topographic correction...","Finalizing results dataset..."];o(t=>t.length>=10?t:[...t,e[Math.floor(Math.random()*e.length)]])},2e3);return()=>{clearInterval(e),clearInterval(t)}},[]),(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl w-full space-y-8 animate-in zoom-in-95 duration-700 my-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center p-3 bg-white border border-slate-200 rounded-2xl shadow-sm mb-4",children:r<100?(0,a.jsx)(f.A,{className:"w-8 h-8 text-indigo-600 animate-spin"}):(0,a.jsx)(M.A,{className:"w-8 h-8 text-emerald-500"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:r<100?"Analyzing Satellite Data...":"Analysis Complete"}),(0,a.jsx)("p",{className:"text-slate-500 max-w-md mx-auto",children:"Our cloud compute cluster is processing 14 granules for your selected AOI. This usually takes around 5-10 minutes."})]}),(0,a.jsxs)(p.Zp,{className:"p-8 space-y-6 bg-white shadow-xl",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-end",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider",children:"Overall Progress"}),(0,a.jsxs)("span",{className:"text-3xl font-black text-slate-900",children:[Math.floor(r),"%"]})]}),(0,a.jsx)(p.ke,{value:r,className:"h-4"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex flex-col items-center text-center",children:[(0,a.jsx)(O.A,{className:"w-5 h-5 text-slate-400 mb-2"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Compute Clusters"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-800",children:"12 Nodes Active"})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex flex-col items-center text-center",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-slate-400 mb-2"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Data Sources"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-800",children:"42 scenes"})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 flex flex-col items-center text-center",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-slate-400 mb-2"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Success Rate"}),(0,a.jsx)("span",{className:"text-sm font-bold text-slate-800",children:"99.4%"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(p.Zp,{className:"bg-slate-900 text-emerald-400 p-6 font-mono text-xs h-64 overflow-hidden relative border-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-slate-500",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"uppercase font-bold tracking-widest text-[10px]",children:"Processing Engine Output"})]}),(0,a.jsxs)("div",{className:"space-y-2 custom-scrollbar overflow-y-auto h-48 pr-2",children:[i.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("span",{className:"text-slate-700",children:["[",new Date().toLocaleTimeString(),"]"]}),(0,a.jsx)("span",{children:e})]},t)),r<100&&(0,a.jsx)("span",{className:"inline-block w-2 h-4 bg-emerald-400 animate-pulse ml-1 align-middle"})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-slate-900 to-transparent pointer-events-none"})]}),(0,a.jsxs)(p.Zp,{className:"p-6 bg-white overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-slate-900 font-bold",children:[(0,a.jsx)(E.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Live Granule Preview"})]}),(0,a.jsx)("div",{className:"rounded-lg overflow-hidden border-2 border-slate-200",children:(0,a.jsx)(g.A,{className:"h-64",isWizard:!1,initialGeoJSON:s})}),r>=100&&(0,a.jsxs)(p.$n,{onClick:t,className:"w-full mt-6 flex items-center gap-2 group",children:["View Analysis Results",(0,a.jsx)(u.A,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]})]})})};function V(){let e=(0,r.useRouter)(),[t,s]=l.useState(!1),[n,i]=l.useState(null);return t?(0,a.jsx)(z,{onFinish:()=>e.push("/dashboard"),initialGeoJSON:n}):(0,a.jsx)(D,{onCancel:()=>e.push("/dashboard"),onStart:e=>{console.log("Analysis started with",e),i(e),s(!0)}})}},17482:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},18527:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},19649:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},19680:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]])},26615:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},50984:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},60507:(e,t,s)=>{"use strict";s.d(t,{$:()=>i,h:()=>o});var a=s(95155),l=s(12115);let r=(0,l.createContext)(void 0),n=[{id:"ws-1",name:"Default Workspace",description:"Your default workspace",createdAt:new Date().toISOString()}];function i(e){let{children:t}=e,[s,i]=(0,l.useState)(n),[o,c]=(0,l.useState)(n[0]);return(0,l.useEffect)(()=>{let e=localStorage.getItem("verdify_workspaces"),t=localStorage.getItem("verdify_current_workspace");if(e)try{let t=JSON.parse(e);i(t.length>0?t:n)}catch(e){console.error("Failed to parse workspaces",e)}if(t)try{let e=JSON.parse(t);c(e)}catch(e){console.error("Failed to parse current workspace",e)}},[]),(0,l.useEffect)(()=>{localStorage.setItem("verdify_workspaces",JSON.stringify(s))},[s]),(0,l.useEffect)(()=>{o&&localStorage.setItem("verdify_current_workspace",JSON.stringify(o))},[o]),(0,a.jsx)(r.Provider,{value:{workspaces:s,currentWorkspace:o,setCurrentWorkspace:c,createWorkspace:e=>{let t={...e,id:"ws-".concat(Date.now()),createdAt:new Date().toISOString()};i(e=>[...e,t]),c(t)}},children:t})}function o(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useWorkspace must be used within a WorkspaceProvider");return e}},62593:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},63263:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},72251:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},76384:(e,t,s)=>{Promise.resolve().then(s.bind(s,12327))},90109:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},90832:(e,t,s)=>{"use strict";s.d(t,{B:()=>o,N:()=>i});var a=s(95155),l=s(12115);let r=(0,l.createContext)(void 0),n=[{id:"1",workspaceId:"ws-1",name:"Amazon Rainforest Monitoring",client:"GreenEarth NGO",startDate:"2024-03-20",deadline:"2024-05-04",status:"Active",progress:30,type:"NDVI",selectedIndices:["NDVI","NDWI"],geojson:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[-60.5,-3.2],[-60.5,-3.8],[-59.8,-3.8],[-59.8,-3.2],[-60.5,-3.2]]]},properties:{}}},{id:"2",workspaceId:"ws-1",name:"Iowa Corn Yield Prediction",client:"AgriCorp Global",startDate:"2024-03-15",deadline:"2024-04-10",status:"Canceled",progress:60,type:"EVI",selectedIndices:["NVI"],geojson:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[-95.5,41.7],[-95.5,41.3],[-94.9,41.3],[-94.9,41.7],[-95.5,41.7]]]},properties:{}}},{id:"3",workspaceId:"ws-1",name:"Sahara Desert Boundary Study",client:"United Nations Env",startDate:"2024-03-01",deadline:"2024-04-01",status:"Completed",progress:100,type:"Custom",selectedIndices:["NDVI","NDWI","NVI"],geojson:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[2.5,25.2],[2.5,24.6],[3.2,24.6],[3.2,25.2],[2.5,25.2]]]},properties:{}}},{id:"4",workspaceId:"ws-2",name:"California Vineyard Hydration",client:"Napa Valley Vintners",startDate:"2024-03-20",deadline:"2024-05-20",status:"Pending",progress:50,type:"SAVI",selectedIndices:["NDWI"],geojson:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[-122.5,38.5],[-122.5,38.2],[-122.2,38.2],[-122.2,38.5],[-122.5,38.5]]]},properties:{}}},{id:"5",workspaceId:"ws-2",name:"Urban Expansion Tokyo",client:"City Planning Dept",startDate:"2024-04-01",deadline:"2024-06-01",status:"Active",progress:45,type:"NDVI",selectedIndices:["NDVI"],geojson:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[139.7,35.7],[139.7,35.6],[139.8,35.6],[139.8,35.7],[139.7,35.7]]]},properties:{}}}];function i(e){let{children:t}=e,[s,i]=(0,l.useState)(n);return(0,l.useEffect)(()=>{let e=localStorage.getItem("verdify_projects");if(e)try{let t=JSON.parse(e);t.length>0&&i(t)}catch(e){console.error("Failed to parse projects",e)}},[]),(0,l.useEffect)(()=>{localStorage.setItem("verdify_projects",JSON.stringify(s))},[s]),(0,a.jsx)(r.Provider,{value:{projects:s,addProject:e=>{i(t=>[e,...t])},updateProject:e=>{i(t=>t.map(t=>t.id===e.id?e:t))},getProjectsByWorkspace:e=>s.filter(t=>t.workspaceId===e)},children:t})}function o(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useProject must be used within a ProjectProvider");return e}}},e=>{e.O(0,[600,63,150,441,255,358],()=>e(e.s=76384)),_N_E=e.O()}]);